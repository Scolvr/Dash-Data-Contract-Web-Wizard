:root {
  /* Flat Design System - Primary Colors */
  --color-primary: #0E76FD;
  --color-primary-dark: #0C5FC4;
  --color-primary-light: #E8F3FF;

  /* Neutral Colors */
  --color-ink: #1A1F36;
  --color-slate: #4A5568;
  --color-silver: #718096;
  --color-smoke: #EDF2F7;
  --color-snow: #F7FAFC;
  --color-white: #FFFFFF;

  /* Semantic Colors */
  --color-success: #10B981;
  --color-success-light: rgba(16, 185, 129, 0.1);
  --color-success-border: rgba(16, 185, 129, 0.3);
  --color-warning: #F59E0B;
  --color-warning-light: rgba(245, 158, 11, 0.1);
  --color-warning-border: rgba(245, 158, 11, 0.3);
  --color-error: #EF4444;
  --color-error-light: rgba(239, 68, 68, 0.1);
  --color-error-border: rgba(239, 68, 68, 0.3);
  --color-info: #06B6D4;
  --color-info-light: rgba(6, 182, 212, 0.1);
  --color-info-border: rgba(6, 182, 212, 0.3);

  /* Legacy compatibility mappings */
  --color-background: #F7FAFC;
  --color-surface: #FFFFFF;
  --color-surface-alt: #EDF2F7;
  --color-text: #1A1F36;
  --color-muted: #4A5568;
  --color-border: #EDF2F7;
  --color-border-strong: #A0AEC0;
  --color-focus: rgba(14, 118, 253, 0.5);
  --color-elevated-border: rgba(160, 174, 192, 0.6);
  --color-placeholder: rgba(74, 85, 104, 0.8);

  /* Sidebar Theme - Light Mode (with transparency) */
  --sidebar-bg: rgba(255, 255, 255, 0.85);
  --sidebar-bg-solid: #FFFFFF;
  --sidebar-text: #1A1F36;
  --sidebar-text-muted: #4A5568;
  --sidebar-border: rgba(237, 242, 247, 0.6);
  --sidebar-hover: rgba(247, 250, 252, 0.8);
  --sidebar-active: rgba(232, 243, 255, 0.9);
  --sidebar-icon: #0E76FD;
  --sidebar-badge-bg: #E8F3FF;
  --sidebar-badge-text: #0E76FD;
  --sidebar-search-bg: rgba(247, 250, 252, 0.6);
  --sidebar-search-border: rgba(237, 242, 247, 0.5);
  --sidebar-search-icon: #A0AEC0;

  /* Step Accent Colors (for progress indicators) */
  --step-1-color: #6366F1; /* Indigo - Naming */
  --step-2-color: #8B5CF6; /* Purple - Permissions */
  --step-3-color: #EC4899; /* Pink - Distribution */
  --step-4-color: #F59E0B; /* Amber - Advanced */
  --step-5-color: #10B981; /* Green - Registration */

  /* Legacy tint support */
  --tint-1: #6366F1;
  --tint-2: #8B5CF6;
  --tint-3: #EC4899;
  --tint-4: #F59E0B;
  --tint-5: #10B981;
  --tint-1-dim: rgba(99, 102, 241, 0.7);
  --tint-2-dim: rgba(139, 92, 246, 0.7);
  --tint-3-dim: rgba(236, 72, 153, 0.7);
  --tint-4-dim: rgba(245, 158, 11, 0.7);
  --tint-5-dim: rgba(16, 185, 129, 0.7);
  --tint-1-wash: rgba(99, 102, 241, 0.1);
  --tint-2-wash: rgba(139, 92, 246, 0.1);
  --tint-3-wash: rgba(236, 72, 153, 0.1);
  --tint-4-wash: rgba(245, 158, 11, 0.1);
  --tint-5-wash: rgba(16, 185, 129, 0.1);

  /* Spacing Scale */
  --space-1: 0.25rem;  /* 4px */
  --space-2: 0.5rem;   /* 8px */
  --space-3: 0.75rem;  /* 12px */
  --space-4: 1rem;     /* 16px */
  --space-5: 1.25rem;  /* 20px */
  --space-6: 1.5rem;   /* 24px */
  --space-8: 2rem;     /* 32px */
  --space-12: 3rem;    /* 48px */
  --space-16: 4rem;    /* 64px */

  /* Legacy spacing compatibility */
  --space-2xs: 4px;
  --space-xs: 8px;
  --space-sm: 12px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 32px;

  /* Border Radius */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-full: 9999px;

  /* Typography Scale */
  --text-xs: 0.75rem;    /* 12px */
  --text-sm: 0.875rem;   /* 14px */
  --text-base: 1rem;     /* 16px */
  --text-lg: 1.125rem;   /* 18px */
  --text-xl: 1.25rem;    /* 20px */
  --text-2xl: 1.5rem;    /* 24px */
  --text-3xl: 1.875rem;  /* 30px */
  --text-4xl: 2.25rem;   /* 36px */

  /* Legacy font sizes */
  --font-size-xs: 0.875rem;
  --font-size-sm: 1rem;
  --font-size-md: 1.125rem;
  --font-size-lg: 1.5rem;
  --font-size-xl: 1.75rem;
  --font-size-2xl: 2.25rem;

  /* Layout */
  --header-height: 72px;
  --page-gutter: 48px;
  --content-max-width: 680px;
  --actions-max-width: 680px;
  --sidebar-width: 280px;
  --guide-width: 380px;
  --guide-collapsed-width: 60px;
  --bp-xs: 480px;
  --bp-sm: 600px;
  --bp-md: 900px;
  --bp-lg: 1200px;

  /* Transitions */
  --transition-fast: 100ms ease;
  --transition-base: 150ms ease;
  --transition-slow: 200ms cubic-bezier(0.2, 0.6, 0.2, 1);
  --transition-duration: 150ms;
  --transition-easing: cubic-bezier(0.2, 0.6, 0.2, 1);

  /* Focus Indicators */
  --focus-ring-width: 3px;
  --focus-ring-offset: 2px;
  --focus-ring-color: var(--color-primary);

  /* Shadows (Flatter, more subtle) */
  --shadow-xs: 0 1px 3px rgba(0, 0, 0, 0.08);
  --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.10);
  --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.12);
  --shadow-lg: 0 12px 32px rgba(0, 0, 0, 0.14);
}


html[data-theme='dark'] {
  /* Dark Mode - Primary Colors */
  --color-primary: #3B9EFF;
  --color-primary-dark: #0E76FD;
  --color-primary-light: rgba(14, 118, 253, 0.15);

  /* Dark Mode - Neutral Colors */
  --color-ink: #F1F5F9;
  --color-slate: #CBD5E1;
  --color-silver: #64748B;
  --color-smoke: #334155;
  --color-snow: #1E293B;
  --color-white: #0F172A;

  /* Dark Mode - Semantic Colors */
  --color-success: #34D399;
  --color-success-light: rgba(52, 211, 153, 0.15);
  --color-success-border: rgba(52, 211, 153, 0.4);
  --color-warning: #FBBF24;
  --color-warning-light: rgba(251, 191, 36, 0.15);
  --color-warning-border: rgba(251, 191, 36, 0.4);
  --color-error: #F87171;
  --color-error-light: rgba(248, 113, 113, 0.15);
  --color-error-border: rgba(248, 113, 113, 0.4);
  --color-info: #22D3EE;
  --color-info-light: rgba(34, 211, 238, 0.15);
  --color-info-border: rgba(34, 211, 238, 0.4);

  /* Dark Mode - Legacy compatibility */
  --color-background: #0F172A;
  --color-surface: #1E293B;

  /* Sidebar Theme - Dark Mode (with transparency) */
  --sidebar-bg: rgba(30, 41, 59, 0.85);
  --sidebar-bg-solid: #1E293B;
  --sidebar-text: #F1F5F9;
  --sidebar-text-muted: #94A3B8;
  --sidebar-border: rgba(51, 65, 85, 0.6);
  --sidebar-hover: rgba(51, 65, 85, 0.8);
  --sidebar-active: rgba(71, 85, 105, 0.9);
  --sidebar-icon: #3B9EFF;
  --sidebar-badge-bg: rgba(59, 158, 255, 0.15);
  --sidebar-badge-text: #3B9EFF;
  --sidebar-search-bg: rgba(15, 23, 42, 0.6);
  --sidebar-search-border: rgba(51, 65, 85, 0.5);
  --sidebar-search-icon: #64748B;
  --color-surface-alt: #334155;
  --color-text: #F1F5F9;
  --color-muted: #94A3B8;
  --color-border: #334155;
  --color-border-strong: #475569;
  --color-focus: rgba(59, 158, 255, 0.5);
  --color-elevated-border: rgba(71, 85, 105, 0.7);
  --color-placeholder: rgba(148, 163, 184, 0.6);

  /* Dark Mode - Step Colors (brighter for visibility) */
  --step-1-color: #818CF8;
  --step-2-color: #A78BFA;
  --step-3-color: #F472B6;
  --step-4-color: #FBBF24;
  --step-5-color: #34D399;

  /* Dark Mode - Legacy tints */
  --tint-1: #818CF8;
  --tint-2: #A78BFA;
  --tint-3: #F472B6;
  --tint-4: #FBBF24;
  --tint-5: #34D399;
  --tint-1-dim: rgba(129, 140, 248, 0.7);
  --tint-2-dim: rgba(167, 139, 250, 0.7);
  --tint-3-dim: rgba(244, 114, 182, 0.7);
  --tint-4-dim: rgba(251, 191, 36, 0.7);
  --tint-5-dim: rgba(52, 211, 153, 0.7);
  --tint-1-wash: rgba(129, 140, 248, 0.15);
  --tint-2-wash: rgba(167, 139, 250, 0.15);
  --tint-3-wash: rgba(244, 114, 182, 0.15);
  --tint-4-wash: rgba(251, 191, 36, 0.15);
  --tint-5-wash: rgba(52, 211, 153, 0.15);

  /* Dark Mode - Shadows (subtle glow instead of shadow) */
  --shadow-xs: 0 1px 3px rgba(0, 0, 0, 0.4);
  --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.5);
  --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.6);
  --shadow-lg: 0 12px 32px rgba(0, 0, 0, 0.7);

  color-scheme: dark;
}

html[data-theme='auto'] {
  color-scheme: light;
}

@media (prefers-color-scheme: dark) {
  html[data-theme='auto'] {
    /* Auto Dark Mode - Match explicit dark theme */
    --color-primary: #3B9EFF;
    --color-primary-dark: #0E76FD;
    --color-primary-light: rgba(14, 118, 253, 0.15);

    --color-ink: #F1F5F9;
    --color-slate: #CBD5E1;
    --color-silver: #64748B;
    --color-smoke: #334155;
    --color-snow: #1E293B;
    --color-white: #0F172A;

    --color-success: #34D399;
    --color-success-light: rgba(52, 211, 153, 0.15);
    --color-success-border: rgba(52, 211, 153, 0.4);
    --color-warning: #FBBF24;
    --color-warning-light: rgba(251, 191, 36, 0.15);
    --color-warning-border: rgba(251, 191, 36, 0.4);
    --color-error: #F87171;
    --color-error-light: rgba(248, 113, 113, 0.15);
    --color-error-border: rgba(248, 113, 113, 0.4);
    --color-info: #22D3EE;
    --color-info-light: rgba(34, 211, 238, 0.15);
    --color-info-border: rgba(34, 211, 238, 0.4);

    --color-background: #0F172A;
    --color-surface: #1E293B;
    --color-surface-alt: #334155;
    --color-text: #F1F5F9;

    /* Sidebar Theme - Dark Mode (Auto) with transparency */
    --sidebar-bg: rgba(30, 41, 59, 0.85);
    --sidebar-bg-solid: #1E293B;
    --sidebar-text: #F1F5F9;
    --sidebar-text-muted: #94A3B8;
    --sidebar-border: rgba(51, 65, 85, 0.6);
    --sidebar-hover: rgba(51, 65, 85, 0.8);
    --sidebar-active: rgba(71, 85, 105, 0.9);
    --sidebar-icon: #3B9EFF;
    --sidebar-badge-bg: rgba(59, 158, 255, 0.15);
    --sidebar-badge-text: #3B9EFF;
    --sidebar-search-bg: rgba(15, 23, 42, 0.6);
    --sidebar-search-border: rgba(51, 65, 85, 0.5);
    --sidebar-search-icon: #64748B;
    --color-muted: #94A3B8;
    --color-border: #334155;
    --color-border-strong: #475569;
    --color-focus: rgba(59, 158, 255, 0.5);
    --color-elevated-border: rgba(71, 85, 105, 0.7);
    --color-placeholder: rgba(148, 163, 184, 0.6);

    --step-1-color: #818CF8;
    --step-2-color: #A78BFA;
    --step-3-color: #F472B6;
    --step-4-color: #FBBF24;
    --step-5-color: #34D399;

    --tint-1: #818CF8;
    --tint-2: #A78BFA;
    --tint-3: #F472B6;
    --tint-4: #FBBF24;
    --tint-5: #34D399;
    --tint-1-dim: rgba(129, 140, 248, 0.7);
    --tint-2-dim: rgba(167, 139, 250, 0.7);
    --tint-3-dim: rgba(244, 114, 182, 0.7);
    --tint-4-dim: rgba(251, 191, 36, 0.7);
    --tint-5-dim: rgba(52, 211, 153, 0.7);
    --tint-1-wash: rgba(129, 140, 248, 0.15);
    --tint-2-wash: rgba(167, 139, 250, 0.15);
    --tint-3-wash: rgba(244, 114, 182, 0.15);
    --tint-4-wash: rgba(251, 191, 36, 0.15);
    --tint-5-wash: rgba(52, 211, 153, 0.15);

    --shadow-xs: 0 1px 3px rgba(0, 0, 0, 0.4);
    --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.5);
    --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.6);
    --shadow-lg: 0 12px 32px rgba(0, 0, 0, 0.7);

    color-scheme: dark;
  }

  html[data-theme='auto'] .pill {
    background: rgba(100, 116, 139, 0.15);
    border-color: rgba(100, 116, 139, 0.3);
    color: var(--color-silver);
  }

  html[data-theme='auto'] .pill.valid {
    background: var(--color-success-light);
    border-color: var(--color-success-border);
    color: var(--color-success);
  }

  html[data-theme='auto'] .pill.invalid {
    background: var(--color-error-light);
    border-color: var(--color-error-border);
    color: var(--color-error);
  }

  html[data-theme='auto'] .wizard-sidebar .pill {
    background: var(--color-surface-alt);
    border-color: var(--color-border);
  }

  html[data-theme='auto'] .wizard-sidebar .pill.valid {
    background: var(--color-success-light);
    color: var(--color-success);
  }

  html[data-theme='auto'] .wizard-sidebar .pill.invalid {
    background: var(--color-error-light);
    color: var(--color-error);
  }

  html[data-theme='auto'] .brand__icon,
  html[data-theme='auto'] .brand__icon img {
    filter: brightness(1.1);
  }

  html[data-theme='auto'] .wizard-tabs,
  html[data-theme='auto'] .wizard-tabs {
    background: var(--color-surface-alt);
  }

  html[data-theme='auto'] .wizard-tab--active,
  html[data-theme='auto'] .wizard-tab--active:hover {
    background: var(--color-surface);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3),
                0 1px 2px rgba(0, 0, 0, 0.2);
  }
}

@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .wizard-screen {
    transition: none;
    transform: none;
  }

  .wizard-option,
  .wizard-button {
    transition: none;
  }
}

html,
body {
  /* Removed height: 100% to allow content to expand beyond viewport */
  min-height: 100%;
}

* {
  box-sizing: border-box;
}

/* Safety rule: ensure [hidden] attribute always hides elements */
[hidden] {
  display: none !important;
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
  color: var(--color-text);
  font-size: clamp(0.95rem, 0.3vw + 0.9rem, 1.05rem);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  display: flex;
  flex-direction: column;
}

img {
  max-width: 100%;
  display: block;
  pointer-events: none;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.theme-toggle {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin-left: 0;
  flex-wrap: wrap;
}

.theme-toggle__label {
  font-size: var(--font-size-xs);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.theme-toggle__options {
  display: flex;
  gap: var(--space-xs);
}

.theme-toggle__option {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 44px;
  min-height: 44px;
  padding: 0 var(--space-sm);
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-muted);
  font-weight: 600;
  cursor: pointer;
  transition: border-color var(--transition-duration) var(--transition-easing),
    background-color var(--transition-duration) var(--transition-easing),
    color var(--transition-duration) var(--transition-easing),
    box-shadow var(--transition-duration) var(--transition-easing);
}

.theme-toggle__option input {
  position: absolute;
  inset: 0;
  margin: 0;
  opacity: 0;
  cursor: pointer;
}

.theme-toggle__option span {
  pointer-events: none;
}

.theme-toggle__option:hover,
.theme-toggle__option:focus-visible {
  border-color: var(--color-primary);
  color: var(--color-text);
  box-shadow: 0 8px 20px hsla(210, 94%, 26%, 0.12);
}

.theme-toggle__option input:focus-visible + span {
  outline: var(--focus-ring-width) solid var(--color-focus);
  outline-offset: var(--focus-ring-offset);
}

.theme-toggle__option--active {
  border-color: transparent;
  background: var(--color-primary);
  color: #fff;
  box-shadow: 0 12px 28px hsla(210, 94%, 32%, 0.25);
}

@media (max-width: 720px) {
  .theme-toggle {
    order: 3;
    width: 100%;
    justify-content: flex-start;
  }

  .theme-toggle__options {
    width: 100%;
    justify-content: flex-start;
  }
}

.brand {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  cursor: default;
  user-select: none;
  width: 100%;
}

.brand__logo {
  width: 32px;
  height: 32px;
  border-radius: 0.6rem;
  box-shadow: 0 4px 12px hsla(215, 62%, 32%, 0.2);
}

.brand__title {
  font-weight: 600;
  font-size: 15px;
  color: color-mix(in srgb, var(--color-text) 95%, #0f1d3d 5%);
  letter-spacing: 0.01em;
}

.wizard-path-nav {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  width: 100%;
  min-width: 0;
  overflow-y: auto;
  overflow-x: hidden;
  padding-right: calc(var(--space-sm) + 4px);
  margin-right: calc(-1 * (var(--space-sm) + 4px));
  padding-bottom: clamp(var(--space-lg), 8vh, var(--space-xl));
  scroll-padding-top: var(--space-lg);
  scrollbar-width: thin;
}

.wizard-path-nav::-webkit-scrollbar {
  width: 4px;
}

.wizard-path-nav::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--color-border) 60%, rgba(74, 110, 255, 0.35) 40%);
  border-radius: 999px;
}

.wizard-path {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: var(--space-sm);
  font-size: var(--font-size-xs);
  padding: 0;
  margin: 0;
  list-style: none;
  color: var(--color-muted);
  cursor: default;
  position: relative;
}

.wizard-path::before {
  content: '';
  position: absolute;
  inset: clamp(var(--space-xs), 1.2vw, var(--space-sm)) 0 clamp(var(--space-sm), 2vw, var(--space-lg)) auto;
  width: 2px;
  border-radius: 999px;
  background: linear-gradient(180deg, color-mix(in srgb, var(--color-border) 45%, rgba(90, 128, 255, 0.35) 55%) 0%, color-mix(in srgb, var(--color-border) 65%, rgba(17, 24, 39, 0.15) 35%) 100%);
  opacity: 0.7;
  pointer-events: none;
}

.wizard-path__item {
  position: relative;
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: clamp(var(--space-sm), 1.4vw, var(--space-md)) clamp(var(--space-md), 2vw, var(--space-lg));
  padding-left: clamp(calc(var(--space-lg) * 1.1), 3.4vw, calc(var(--space-xl) * 0.95));
  color: color-mix(in srgb, var(--color-text) 85%, #d7e3ff 15%);
  font-weight: 600;
  font-size: var(--font-size-sm);
  pointer-events: auto;
  cursor: pointer;
  width: 100%;
  z-index: 1;
  border-radius: clamp(var(--radius-md), 0.75rem, var(--radius-lg));
  border: 1px solid color-mix(in srgb, var(--color-border) 45%, rgba(78, 134, 255, 0.5) 55%);
  background: color-mix(in srgb, var(--color-surface) 88%, rgba(255, 255, 255, 0.18) 12%);
  box-shadow: 0 10px 28px hsla(215, 58%, 20%, 0.18);
  backdrop-filter: blur(8px);
  transition: background-color var(--transition-duration) var(--transition-easing),
    border-color var(--transition-duration) var(--transition-easing),
    box-shadow var(--transition-duration) var(--transition-easing),
    color var(--transition-duration) var(--transition-easing);
}

.wizard-path__item::before {
  content: '';
  position: absolute;
  left: clamp(calc(var(--space-lg) * 0.25), 0.9vw, calc(var(--space-md) * 1.1));
  top: 50%;
  width: 12px;
  height: 12px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--color-border) 35%, rgba(74, 110, 255, 0.6) 65%);
  box-shadow: 0 0 0 5px color-mix(in srgb, var(--color-border) 20%, rgba(74, 110, 255, 0.15) 80%);
  transform: translateY(-50%);
  transition: background-color var(--transition-duration) var(--transition-easing),
    box-shadow var(--transition-duration) var(--transition-easing);
}

.wizard-path__primary {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  width: 100%;
}

.wizard-path__item[data-has-children="true"] {
  align-items: stretch;
  flex-direction: column;
  gap: var(--space-sm);
  padding-bottom: var(--space-sm);
}

.wizard-path__item[data-has-children="true"] .wizard-path__pill {
  margin-left: auto;
}

.wizard-path__caret {
  width: 12px;
  height: 12px;
  border-right: 2px solid color-mix(in srgb, var(--color-muted) 45%, #5671a8 55%);
  border-bottom: 2px solid color-mix(in srgb, var(--color-muted) 45%, #5671a8 55%);
  transform: rotate(45deg);
  transition: border-color var(--transition-duration) var(--transition-easing),
    transform var(--transition-duration) var(--transition-easing);
  margin-left: var(--space-xs);
  flex-shrink: 0;
}

.wizard-path__item.is-open .wizard-path__caret,
.wizard-path__item.is-active .wizard-path__caret {
  border-color: var(--color-primary);
  transform: rotate(135deg);
}

.wizard-subpath {
  list-style: none;
  margin: 0;
  padding: var(--space-xs) 0 0 clamp(calc(var(--space-lg) * 0.9), 3vw, calc(var(--space-xl) * 0.8));
  display: none;
  flex-direction: column;
  gap: var(--space-xs);
}

.wizard-subpath[hidden] {
  display: none;
}

.wizard-path__item.is-open .wizard-subpath {
  display: flex;
}

.wizard-subpath__item {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-2xs) var(--space-sm);
  border-radius: var(--radius-sm);
  color: color-mix(in srgb, var(--color-muted) 70%, #c0c8ff 30%);
  font-size: var(--font-size-xs);
  font-weight: 600;
  cursor: pointer;
  transition: background-color var(--transition-duration) var(--transition-easing),
    color var(--transition-duration) var(--transition-easing),
    box-shadow var(--transition-duration) var(--transition-easing);
  margin-left: clamp(var(--space-md), 2.2vw, calc(var(--space-lg) * 0.8));
}

.wizard-subpath__item::before {
  content: '';
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--color-border) 40%, #7aa7ff 60%);
  flex-shrink: 0;
}

.wizard-subpath__item:hover,
.wizard-subpath__item:focus-visible {
  color: color-mix(in srgb, var(--color-primary) 75%, #f7fbff 25%);
  background: linear-gradient(145deg, color-mix(in srgb, var(--color-surface) 76%, rgba(30, 58, 138, 0.7) 24%), color-mix(in srgb, var(--color-surface-alt) 55%, rgba(24, 40, 82, 0.8) 45%));
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--color-primary) 55%, #8fb4ff 45%);
}

.wizard-subpath__item.is-active {
  color: color-mix(in srgb, var(--color-primary) 78%, #eef4ff 22%);
  background: linear-gradient(145deg, color-mix(in srgb, var(--color-surface) 68%, rgba(45, 86, 176, 0.85) 32%), color-mix(in srgb, var(--color-surface-alt) 50%, rgba(20, 34, 70, 0.85) 50%));
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--color-primary) 70%, #a8c6ff 30%);
}

.wizard-subpath__item:focus-visible {
  outline: var(--focus-ring-width) solid var(--color-focus);
  outline-offset: var(--focus-ring-offset);
}

.wizard-subpath__label {
  pointer-events: none;
}

.wizard-subpath__context {
  display: block;
  font-size: var(--font-size-xs);
  color: var(--color-muted);
  margin-top: 2px;
}

.wizard-subpath__item.is-active .wizard-subpath__context {
  color: color-mix(in srgb, var(--color-primary) 80%, #f1f5ff 20%);
}

.wizard-subsection {
  display: grid;
  gap: var(--space-sm);
  margin-top: var(--space-lg);
}

.wizard-subsection:first-of-type {
  margin-top: 0;
}

.wizard-subsection__title {
  margin: 0;
  font-size: var(--font-size-sm);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--color-muted);
}

.wizard-subsection__body {
  margin: 0;
  font-size: var(--font-size-sm);
  color: var(--color-text);
}

.wizard-subsection__list {
  margin: 0;

/* ============================================
   CATEGORIZED NAVIGATION
   ============================================ */

.wizard-category {
  margin-bottom: var(--space-6);
}

.wizard-category:last-child {
  margin-bottom: 0;
}

.wizard-category__title {
  margin: 0 0 var(--space-3) 0;
  padding: 0 var(--space-4);
  font-size: var(--font-size-xs);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--color-muted);
}

.wizard-step-number {
  font-weight: 700;
  color: var(--color-primary);
  font-size: var(--font-size-sm);
  min-width: 24px;
}

.wizard-badge {
  display: inline-flex;
  align-items: center;
  padding: 2px var(--space-2);
  border-radius: var(--radius-sm);
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  margin-left: var(--space-2);
  vertical-align: middle;
  line-height: 1;
}

.wizard-badge--optional {
  background: var(--color-info-light);
  color: var(--color-info);
  border: 1px solid var(--color-info-border);
}

.wizard-badge--advanced {
  background: var(--color-warning-light);
  color: var(--color-warning);
  border: 1px solid var(--color-warning-border);
}

.wizard-badge--recommended {
  background: var(--color-success-light);
  color: var(--color-success);
  border: 1px solid var(--color-success-border);
}

/* ============================================
   DISTRIBUTION PROGRESSIVE DISCLOSURE (INLINE)
   ============================================ */

.distribution-inline-panel {
  margin-top: var(--space-3);
  margin-left: var(--space-8);
  margin-bottom: var(--space-4);
  padding: var(--space-4);
  background: var(--color-surface-alt);
  border-left: 3px solid var(--color-primary);
  border-radius: var(--radius-md);
  animation: slideDown 0.25s ease-out;
  overflow: hidden;
  transition: opacity 0.25s ease-out, max-height 0.25s ease-out, margin 0.25s ease-out, padding 0.25s ease-out;
}

.distribution-inline-panel.collapsing {
  opacity: 0;
  max-height: 0;
  padding-top: 0;
  padding-bottom: 0;
  margin-top: 0;
  margin-bottom: 0;
}

@media (max-width: 600px) {
  .distribution-inline-panel {
    margin-left: var(--space-4);
  }
}

@keyframes slideDown {
  from {
    opacity: 0;
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
    margin-bottom: 0;
  }
  to {
    opacity: 1;
    max-height: 500px;
    padding-top: var(--space-4);
    padding-bottom: var(--space-4);
    margin-bottom: var(--space-4);
  }
}

/* Field Messages */
.field-message {
  margin-top: var(--space-3);
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-md);
  font-size: var(--font-size-sm);
  line-height: 1.5;
  display: flex;
  align-items: center;
  gap: var(--space-3);
  justify-content: space-between;
}

.field-message--info {
  background: var(--color-surface-alt);
  border: 1px solid var(--color-border);
  color: var(--color-muted);
}

.field-message p {
  margin: 0;
  flex: 1;
}

.field-message button {
  flex-shrink: 0;
}
  padding-left: 1.25rem;
  display: grid;
  gap: var(--space-2xs);
  list-style: disc;
  color: var(--color-muted);
  font-size: var(--font-size-sm);
}

.wizard-subsection__hint {
  margin: 0;
  font-size: var(--font-size-xs);
  color: var(--color-muted);
}

.wizard-subsection--panel {
  border-radius: var(--radius-lg);
  border: 1px solid color-mix(in srgb, var(--color-border) 70%, rgba(74, 110, 255, 0.18) 30%);
  padding: clamp(var(--space-md), 3vw, var(--space-lg));
  background: color-mix(in srgb, var(--color-surface) 92%, rgba(255, 255, 255, 0.18) 8%);
  box-shadow: 0 14px 32px hsla(215, 52%, 12%, 0.18);
  display: grid;
  gap: clamp(var(--space-md), 2vw, var(--space-lg));
}

.wizard-subsection--panel.is-disabled {
  opacity: 0.55;
}

.wizard-anchor-highlight {
  outline: 2px solid var(--color-focus);
  outline-offset: 6px;
  border-radius: var(--radius-md);
}

.wizard-path__item:focus-visible {
  outline: var(--focus-ring-width) solid var(--color-focus);
  outline-offset: var(--focus-ring-offset);
}

.wizard-path__item:hover,
.wizard-path__item:focus-visible {
  border-color: color-mix(in srgb, var(--color-primary) 65%, #7aa7ff 35%);
  background: linear-gradient(155deg, color-mix(in srgb, var(--color-surface) 88%, rgba(70, 102, 196, 0.18) 12%), color-mix(in srgb, var(--color-surface-alt) 60%, rgba(40, 82, 178, 0.4) 40%));
  color: color-mix(in srgb, var(--color-primary) 75%, #f7fbff 25%);
  box-shadow: 0 18px 42px hsla(215, 78%, 26%, 0.38);
}

.wizard-step {
  font-weight: 600;
  font-size: var(--font-size-sm);
  color: color-mix(in srgb, var(--color-text) 90%, #15213d 10%);
  transition: color var(--transition-duration) var(--transition-easing), opacity var(--transition-duration) var(--transition-easing);
}

.wizard-path__item.is-active,
.wizard-path__item[aria-current="step"] {
  background: linear-gradient(155deg, color-mix(in srgb, var(--color-surface) 86%, rgba(74, 110, 255, 0.22) 14%), color-mix(in srgb, var(--color-surface-alt) 56%, rgba(40, 82, 178, 0.48) 44%));
  border-color: color-mix(in srgb, var(--color-primary) 80%, #9dc1ff 20%);
  color: color-mix(in srgb, var(--color-primary) 75%, #f4f8ff 25%);
  box-shadow: 0 20px 48px hsla(215, 80%, 32%, 0.45);
}

.wizard-path__item.is-active::before,
.wizard-path__item[aria-current="step"]::before {
  background: color-mix(in srgb, var(--color-primary) 85%, #ffffff 15%);
  box-shadow: 0 0 0 6px color-mix(in srgb, var(--color-primary) 25%, rgba(74, 110, 255, 0.2) 75%), 0 0 18px rgba(74, 110, 255, 0.35);
}

.wizard-path__item.is-complete {
  border-color: color-mix(in srgb, var(--color-primary) 65%, #7aa7ff 35%);
  background: linear-gradient(155deg, color-mix(in srgb, var(--color-surface) 88%, rgba(64, 110, 220, 0.16) 12%), color-mix(in srgb, var(--color-surface-alt) 62%, rgba(28, 56, 126, 0.38) 38%));
  box-shadow: 0 16px 40px hsla(215, 74%, 26%, 0.34);
}

.wizard-path__item.is-complete::before {
  background: color-mix(in srgb, var(--color-primary) 45%, rgba(255, 255, 255, 0.35) 55%);
  box-shadow: 0 0 0 4px color-mix(in srgb, var(--color-border) 28%, rgba(74, 110, 255, 0.18) 72%);
}

.wizard-path__item.is-future .wizard-step {
  opacity: 0.55;
  color: color-mix(in srgb, var(--color-muted) 78%, #8090c2 22%);
}

.wizard-path__item.is-complete .wizard-step,
.wizard-path__item.is-active .wizard-step,
.wizard-path__item[aria-current="step"] .wizard-step {
  color: var(--color-text);
  opacity: 1;
}

.wizard-path__pill {
  margin-left: auto;
}

.wizard-sidebar .pill {
  min-width: 3.75rem;
  padding: 0 var(--space-sm);
  border-radius: 999px;
  background: color-mix(in srgb, var(--color-surface) 85%, rgba(255, 255, 255, 0.14) 15%);
  border: 1px solid color-mix(in srgb, var(--color-border) 65%, rgba(78, 134, 255, 0.28) 35%);
  color: color-mix(in srgb, var(--color-muted) 70%, #4a5a82 30%);
  box-shadow: none;
}

.wizard-sidebar .pill.valid {
  background: linear-gradient(135deg, color-mix(in srgb, var(--color-primary) 75%, #7aa7ff 25%) 0%, color-mix(in srgb, var(--color-primary) 65%, #3f7bff 35%) 100%);
  border-color: color-mix(in srgb, var(--color-primary) 80%, rgba(62, 116, 255, 0.4) 20%);
  color: #fff;
  box-shadow: none;
}

.wizard-sidebar .pill.invalid {
  background: color-mix(in srgb, var(--color-surface-alt) 80%, rgba(255, 255, 255, 0.08) 20%);
  border-color: color-mix(in srgb, var(--color-border) 78%, rgba(90, 120, 180, 0.25) 22%);
  color: color-mix(in srgb, var(--color-muted) 85%, #5f6f95 15%);
}

.pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  min-width: 3.5rem;
  height: auto;
  padding: 4px 12px;
  border-radius: var(--radius-xl);
  font-weight: 500;
  font-size: var(--text-xs);
  letter-spacing: 0.01em;
  background: var(--color-silver);
  background: rgba(160, 174, 192, 0.1);
  color: var(--color-silver);
  border: 1px solid rgba(160, 174, 192, 0.3);
  line-height: 1.4;
  transition: all var(--transition-base);
}

.pill::before {
  content: "·";
  font-size: 1.2em;
  line-height: 1;
}

.pill.valid {
  background: #D1FAE5;
  border-color: #10B981;
  color: #047857;
  font-weight: 600;
}

.pill.valid::before {
  content: "✓";
  font-weight: 700;
}

.pill.invalid {
  background: #FEE2E2;
  border-color: #EF4444;
  color: #DC2626;
  font-weight: 600;
}

.pill.invalid::before {
  content: "✕";
  font-weight: 700;
}

html[data-theme='dark'] .pill {
  background: rgba(100, 116, 139, 0.15);
  border-color: rgba(100, 116, 139, 0.3);
  color: var(--color-silver);
}

html[data-theme='dark'] .pill.valid {
  background: var(--color-success-light);
  border-color: var(--color-success-border);
  color: var(--color-success);
}

html[data-theme='dark'] .pill.invalid {
  background: var(--color-error-light);
  border-color: var(--color-error-border);
  color: var(--color-error);
}

html[data-theme='dark'] .wizard-sidebar .pill {
  background: var(--color-surface-alt);
  border-color: var(--color-border);
}

html[data-theme='dark'] .wizard-sidebar .pill.valid {
  background: var(--color-success-light);
  color: var(--color-success);
}

html[data-theme='dark'] .wizard-sidebar .pill.invalid {
  background: var(--color-error-light);
  color: var(--color-error);
}


@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .wizard-screen {
    transition: none;
    transform: none;
  }

  .wizard-option,
  .wizard-button {
    transition: none;
  }
}

html,
body {
  /* Removed height: 100% to allow content to expand beyond viewport */
  min-height: 100%;
}

* {
  box-sizing: border-box;
}

/* Safety rule: ensure [hidden] attribute always hides elements */
[hidden] {
  display: none !important;
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif;
  color: var(--color-text);
  background-color: var(--color-background);
  font-size: clamp(0.95rem, 0.3vw + 0.9rem, 1.05rem);
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  display: flex;
  flex-direction: column;
}

img {
  max-width: 100%;
  display: block;
  pointer-events: none;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.wizard-shell {
  display: flex;
  align-items: flex-start;  /* Changed from stretch to flex-start for natural content flow */
  min-height: 100vh;
  /* Removed max-height: 100vh to allow content to expand beyond viewport */
  width: 100%;
  flex: 1 1 auto;
  padding-left: var(--sidebar-width);
  /* Changed overflow: hidden to visible to allow natural scrolling */
  overflow: visible;
}

.wizard-sidebar {
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  gap: 0;
  width: var(--sidebar-width);
  height: 100vh;
  padding: 0;
  background: var(--sidebar-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-right: 1px solid var(--sidebar-border);
  box-shadow: none;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: thin !important; /* Firefox: thin scrollbar */
  scrollbar-color: #3B9EFF transparent !important; /* Firefox: thumb track */
  scrollbar-gutter: stable;
  z-index: 10;
  overscroll-behavior: contain;
  direction: rtl !important; /* Move scrollbar to left side */
}

/* Enhanced fade gradient on right edge */
.wizard-sidebar::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: var(--guide-collapsed-width);
  background: linear-gradient(to right,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.05) 30%,
    rgba(255, 255, 255, 0.15) 70%,
    rgba(255, 255, 255, 0.25) 100%
  );
  pointer-events: none;
  z-index: 1;
}

/* Dark mode fade gradient */
html[data-theme='dark'] .wizard-sidebar::after {
  background: linear-gradient(to right,
    rgba(0, 0, 0, 0) 0%,
    rgba(0, 0, 0, 0.1) 30%,
    rgba(0, 0, 0, 0.25) 70%,
    rgba(0, 0, 0, 0.4) 100%
  );
}

/* Auto dark mode fade gradient */
@media (prefers-color-scheme: dark) {
  html[data-theme='auto'] .wizard-sidebar::after {
    background: linear-gradient(to right,
      rgba(0, 0, 0, 0) 0%,
      rgba(0, 0, 0, 0.1) 30%,
      rgba(0, 0, 0, 0.25) 70%,
      rgba(0, 0, 0, 0.4) 100%
    );
  }
}

/* Sidebar Sections */
.sidebar-section {
  display: flex;
  flex-direction: column;
  gap: 0;
  width: 100%;
  height: 100%;
  direction: ltr; /* Restore normal text flow */
}

.sidebar-section[hidden] {
  display: none;
}

.wizard-sidebar::-webkit-scrollbar {
  width: 6px !important;
}

.wizard-sidebar::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 3px;
  margin: 4px 0;
}

.wizard-sidebar::-webkit-scrollbar-thumb {
  background: #3B9EFF !important;
  border-radius: 3px;
  transition: all 0.2s ease;
}

.wizard-sidebar::-webkit-scrollbar-thumb:hover {
  background: #60AFFF !important;
}

.wizard-sidebar::-webkit-scrollbar-thumb:active {
  background: #0E76FD !important;
}

/* Dark mode scrollbar */
html[data-theme='dark'] .wizard-sidebar {
  scrollbar-color: #2563EB transparent; /* Firefox dark mode */
}

html[data-theme='dark'] .wizard-sidebar::-webkit-scrollbar-track {
  background: transparent;
}

html[data-theme='dark'] .wizard-sidebar::-webkit-scrollbar-thumb {
  background: #2563EB !important;
}

html[data-theme='dark'] .wizard-sidebar::-webkit-scrollbar-thumb:hover {
  background: #3B82F6 !important;
}

html[data-theme='dark'] .wizard-sidebar::-webkit-scrollbar-thumb:active {
  background: #1E40AF !important;
}

/* Auto dark mode scrollbar */
@media (prefers-color-scheme: dark) {
  html[data-theme='auto'] .wizard-sidebar {
    scrollbar-color: #2563EB transparent; /* Firefox auto dark mode */
  }

  html[data-theme='auto'] .wizard-sidebar::-webkit-scrollbar-track {
    background: transparent;
  }

  html[data-theme='auto'] .wizard-sidebar::-webkit-scrollbar-thumb {
    background: #2563EB !important;
  }

  html[data-theme='auto'] .wizard-sidebar::-webkit-scrollbar-thumb:hover {
    background: #3B82F6 !important;
  }

  html[data-theme='auto'] .wizard-sidebar::-webkit-scrollbar-thumb:active {
    background: #1E40AF !important;
  }
}

.wizard-sidebar__header {
  padding: 12px 16px 10px;
  background: transparent;
  border-bottom: none;
  direction: ltr; /* Restore normal text flow */
}

/* Brand Styling */
.brand {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 0;
  border: none;
  background: transparent;
  text-align: left;
  cursor: default;
  user-select: none;
  pointer-events: none;
}

.brand__icon {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--sidebar-icon);
  border-radius: 8px;
  padding: 6px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: all 0.2s ease;
}

html[data-theme='dark'] .brand__icon,
html[data-theme='auto'] .brand__icon {
  background: var(--color-primary);
}

@media (prefers-color-scheme: dark) {
  html[data-theme='auto'] .brand__icon {
    background: var(--color-primary);
  }
}

.brand__icon img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.brand__title {
  font-size: 18px;
  font-weight: 700;
  color: var(--sidebar-text);
  line-height: 1.2;
  letter-spacing: -0.01em;
}

/* Search Bar */
.wizard-sidebar__search {
  position: relative;
  padding: 0 16px;
  margin-bottom: 20px;
  display: none; /* Hidden to save space */
}

.wizard-sidebar__search .search-icon {
  position: absolute;
  left: 28px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--sidebar-search-icon);
  pointer-events: none;
  width: 18px;
  height: 18px;
}

.wizard-sidebar__search-input {
  width: 100%;
  padding: 10px 12px 10px 40px;
  background: var(--sidebar-search-bg);
  border: 1px solid var(--sidebar-search-border);
  border-radius: 10px;
  color: var(--sidebar-text);
  font-size: 14px;
  outline: none;
  transition: all 0.2s ease;
}

.wizard-sidebar__search-input::placeholder {
  color: var(--sidebar-text-muted);
}

.wizard-sidebar__search-input:focus {
  background: var(--sidebar-hover);
  border-color: var(--sidebar-border);
}

/* Navigation */
.wizard-nav {
  flex: 1;
  padding: 0 12px;
  overflow-y: auto;
}

.wizard-nav__label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--sidebar-text-muted);
  opacity: 0.8;
  padding: 12px 12px 8px;
  margin-top: 8px;
}

.wizard-nav__label:first-child {
  margin-top: 0;
}

/* Navigation Sections */
.wizard-nav-section {
  margin-bottom: 12px;
}

/* Navigation Items */
.wizard-nav-item {
  position: relative;
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 8px 12px;
  margin-bottom: 1px;
  background: transparent;
  border: none;
  border-radius: 8px;
  color: var(--sidebar-text);
  opacity: 0.85;
  font-size: 14px;
  font-weight: 500;
  text-align: left;
  cursor: pointer;
  transition: all 0.15s ease;
}

.wizard-nav-item:hover {
  background: var(--sidebar-hover);
  opacity: 1;
}

.wizard-nav-item[aria-current="step"],
.wizard-nav-item.wizard-nav-item--active {
  background: var(--sidebar-active);
  opacity: 1;
  font-weight: 500;
}

.wizard-nav-item__icon {
  flex-shrink: 0;
  width: 20px;
  height: 20px;
  color: var(--sidebar-icon);
  opacity: 0.9;
  transition: all 0.15s ease;
}

.wizard-nav-item:hover .wizard-nav-item__icon,
.wizard-nav-item[aria-current="step"] .wizard-nav-item__icon {
  opacity: 1;
}

html[data-theme='light'] .wizard-nav-item__icon {
  color: var(--color-primary);
}

.wizard-nav-item__text {
  flex: 1;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.wizard-nav-item__chevron {
  flex-shrink: 0;
  width: 14px;
  height: 14px;
  color: var(--sidebar-text-muted);
  transition: transform 0.2s ease;
}

.wizard-nav-item--expandable[aria-expanded="true"] .wizard-nav-item__chevron {
  transform: rotate(90deg);
}

/* Sub-navigation */
.wizard-nav-submenu {
  margin-left: 44px;
  margin-bottom: 4px;
  padding-left: 12px;
  border-left: 2px solid var(--sidebar-border);
}

.wizard-nav-submenu[hidden] {
  display: none;
}

.wizard-nav-subitem {
  position: relative;
  display: flex;
  align-items: center;
  padding: 6px 12px;
  margin-bottom: 1px;
  border-radius: 6px;
  color: var(--sidebar-text-muted);
  font-size: 14px;
  font-weight: 400;
  text-decoration: none;
  transition: all 0.15s ease;
}

.wizard-nav-subitem:hover {
  background: var(--sidebar-hover);
  color: var(--sidebar-text);
  opacity: 0.9;
}

.wizard-nav-subitem--active,
.wizard-nav-subitem.is-active,
.wizard-nav-subitem[aria-current="page"] {
  background: var(--sidebar-active);
  color: var(--sidebar-text);
  font-weight: 500;
}

/* Add left border indicator for active substep */
.wizard-nav-subitem.is-active::before,
.wizard-nav-subitem[aria-current="page"]::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 60%;
  background: var(--brand-primary, #008de4);
  border-radius: 0 2px 2px 0;
}

.wizard-nav-subitem__text {
  flex: 1;
}

/* Update badges for sidebar */
.wizard-nav-item .wizard-badge {
  font-size: 9px;
  padding: 3px 7px;
  background: var(--sidebar-badge-bg);
  color: var(--sidebar-badge-text);
  border: 1px solid var(--sidebar-badge-bg);
  margin-left: 0;
  border-radius: 6px;
  font-weight: 600;
  letter-spacing: 0.02em;
}

.wizard-nav-item .wizard-path__pill {
  margin-left: auto;
  font-size: 11px;
  font-weight: 700;
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: var(--sidebar-badge-bg);
  color: var(--sidebar-badge-text);
  border-radius: 10px;
  border: 1px solid var(--sidebar-badge-bg);
}

html[data-theme='light'] .wizard-nav-item .wizard-path__pill {
  background: var(--color-primary);
  color: white;
  border-color: var(--color-primary);
}

.wizard-sidebar__footer {
  padding: 16px 12px 20px;
  border-top: 1px solid var(--sidebar-border);
  background: transparent;
}

.wizard-sidebar__footer .wizard-nav-item {
  padding: 10px 12px;
  margin-bottom: 8px;
}

.wizard-sidebar .wizard-path {
  padding-left: clamp(calc(var(--space-lg) * 0.9), 2.6vw, calc(var(--space-xl) * 0.9));
  position: relative;
  z-index: 1;
  padding-bottom: clamp(160px, 18vh, 220px);
  overflow: visible;
}

.theme-toggle-box {
  width: 100%;
  padding: 0;
  border-radius: 0;
  border: none;
  background: transparent;
  box-shadow: none;
  pointer-events: auto;
}

.wizard-sidebar .theme-toggle {
  flex-direction: column;
  align-items: stretch;
  gap: 8px;
}

.wizard-sidebar .theme-toggle__options {
  width: 100%;
  justify-content: space-between;
  gap: 6px;
  flex-wrap: wrap;
}

.wizard-sidebar .theme-toggle__label {
  color: var(--sidebar-text-muted);
  font-weight: 500;
  font-size: 11px;
  margin-bottom: 4px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  opacity: 0.8;
}

.wizard-sidebar .theme-toggle__option {
  flex: 1 1 calc(33.33% - 6px);
  min-width: var(--guide-collapsed-width);
  min-height: 36px;
  padding: 0 8px;
  border-radius: 8px;
  border: 1px solid var(--sidebar-border);
  background: var(--sidebar-search-bg);
  color: var(--sidebar-text-muted);
  font-size: 13px;
  box-shadow: none;
  transition: all 0.15s ease;
}

.wizard-sidebar .theme-toggle__option:hover,
.wizard-sidebar .theme-toggle__option:focus-visible {
  border-color: var(--sidebar-border);
  background: var(--sidebar-hover);
  color: var(--sidebar-text);
}

.wizard-sidebar .theme-toggle__option.theme-toggle__option--active {
  background: var(--sidebar-active);
  border-color: var(--sidebar-border);
  color: var(--sidebar-text);
  font-weight: 600;
}

.wizard-content {
  min-width: 0;
  position: relative;
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  width: 100%;
  /* Reserve space on the right for info/guide panel (380px + 30px margin + 30px spacing) */
  max-width: calc(100% - 440px);
  margin-right: 440px;
  transition: max-width 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              margin-right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  /* Removed min-height: 0 to allow natural content expansion */
}

/* When panel is collapsed, recenter content */
body.guide-panel-collapsed .wizard-content {
  max-width: calc(100% - 90px); /* Just space for collapsed button (60px + margins) */
  margin-right: 90px;
}

/* On smaller screens, use full width */
@media (max-width: 1400px) {
  .wizard-content {
    max-width: 100%;
    margin-right: 0;
  }

  body.guide-panel-collapsed .wizard-content {
    max-width: 100%;
    margin-right: 0;
  }
}

/* Wizard Tabs */
.wizard-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
  margin-left: 200px;
  margin-right: auto;
  padding: 6px;
  background: var(--color-smoke);
  border-radius: 12px;
  width: fit-content;
  max-width: 100%;
  transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              margin-right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Dynamic recentering for tabs when guide panel collapses */
body.guide-panel-collapsed .wizard-tabs {
  margin-left: auto;
  margin-right: auto;
}

html[data-theme='dark'] .wizard-tabs,
html[data-theme='auto'] .wizard-tabs {
  background: var(--color-surface-alt);
}

@media (prefers-color-scheme: dark) {
  html[data-theme='auto'] .wizard-tabs {
    background: var(--color-surface-alt);
  }
}

.wizard-tab {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 20px;
  background: transparent;
  border: none;
  border-radius: 8px;
  color: var(--color-slate);
  font-size: 15px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
}

.wizard-tab:hover {
  background: rgba(14, 118, 253, 0.08);
  color: var(--color-primary);
}

.wizard-tab--active {
  background: var(--color-surface);
  color: var(--color-primary);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08),
              0 1px 2px rgba(0, 0, 0, 0.06);
}

html[data-theme='dark'] .wizard-tab--active,
html[data-theme='auto'] .wizard-tab--active {
  background: var(--color-surface);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3),
              0 1px 2px rgba(0, 0, 0, 0.2);
}

@media (prefers-color-scheme: dark) {
  html[data-theme='auto'] .wizard-tab--active {
    background: var(--color-surface);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3),
                0 1px 2px rgba(0, 0, 0, 0.2);
  }
}

.wizard-tab__icon {
  flex-shrink: 0;
  width: 20px;
  height: 20px;
  opacity: 0.7;
  transition: opacity 0.2s ease;
}

.wizard-tab:hover .wizard-tab__icon,
.wizard-tab--active .wizard-tab__icon {
  opacity: 1;
}

.wizard-tab__text {
  font-weight: 500;
}

.wizard-tab--active .wizard-tab__text {
  font-weight: 600;
}

/* Responsive tabs */
@media (max-width: 600px) {
  .wizard-tabs {
    width: 100%;
    justify-content: space-between;
    gap: 4px;
    padding: 4px;
  }

  .wizard-tab {
    flex: 1;
    padding: 10px 12px;
    gap: 8px;
    font-size: 14px;
  }

  .wizard-tab__icon {
    width: 18px;
    height: 18px;
  }
}

@media (max-width: 480px) {
  .wizard-tab__text {
    display: none;
  }

  .wizard-tab {
    justify-content: center;
    padding: 12px;
  }
}

/* ========================================
   Wizard Progress Indicator - Compact Vertical Steps
   ======================================== */

.wizard-progress-compact {
  padding: var(--space-4) var(--space-3);
  margin: 0 var(--space-4) var(--space-4);
  position: relative;
}

/* Steps Container with Connecting Line */
.wizard-progress-compact__steps {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  position: relative;
  padding-left: var(--space-2);
}

/* Vertical connecting line between dots */
.wizard-progress-compact__steps::before {
  content: '';
  position: absolute;
  left: 15px;
  top: 12px;
  bottom: 12px;
  width: 2px;
  background: linear-gradient(180deg,
    var(--color-border) 0%,
    var(--color-border) 100%
  );
  z-index: 0;
}

html[data-theme='dark'] .wizard-progress-compact__steps::before {
  background: linear-gradient(180deg,
    rgba(255, 255, 255, 0.1) 0%,
    rgba(255, 255, 255, 0.1) 100%
  );
}

/* Individual Step Button */
.wizard-progress-compact__step {
  display: flex;
  align-items: center;
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  position: relative;
  z-index: 1;
  transition: all 0.2s ease;
}

.wizard-progress-compact__step:disabled {
  cursor: not-allowed;
}

.wizard-progress-compact__step:focus-visible {
  outline: var(--focus-ring-width) solid var(--color-focus);
  outline-offset: var(--focus-ring-offset);
  border-radius: var(--radius-full);
}

/* Step Dot/Circle */
.wizard-progress-compact__dot {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: var(--sidebar-bg-solid);
  border: 2px solid var(--color-border);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 700;
  color: var(--color-silver);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

html[data-theme='dark'] .wizard-progress-compact__dot {
  background: var(--color-surface);
  border-color: rgba(255, 255, 255, 0.15);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

/* Disabled/Future Step */
.wizard-progress-compact__step:disabled .wizard-progress-compact__dot {
  opacity: 0.4;
  border-color: var(--color-border);
}

/* Step-specific accent colors */
.wizard-progress-compact__step[data-step="naming"] {
  --step-accent: var(--step-1-color);
  --step-accent-rgb: 99, 102, 241;
}

.wizard-progress-compact__step[data-step="permissions"] {
  --step-accent: var(--step-2-color);
  --step-accent-rgb: 139, 92, 246;
}

.wizard-progress-compact__step[data-step="distribution"] {
  --step-accent: var(--step-3-color);
  --step-accent-rgb: 236, 72, 153;
}

.wizard-progress-compact__step[data-step="advanced"] {
  --step-accent: var(--step-4-color);
  --step-accent-rgb: 245, 158, 11;
}

.wizard-progress-compact__step[data-step="registration"] {
  --step-accent: var(--step-5-color);
  --step-accent-rgb: 16, 185, 129;
}

/* Current Step - Glowing effect with accent color */
.wizard-progress-compact__step[data-current="true"] .wizard-progress-compact__dot {
  background: var(--step-accent);
  border-color: var(--step-accent);
  color: white;
  transform: scale(1.15);
  box-shadow:
    0 0 0 4px rgba(var(--step-accent-rgb), 0.15),
    0 0 12px rgba(var(--step-accent-rgb), 0.4),
    0 4px 12px rgba(0, 0, 0, 0.15);
  animation: pulseGlow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Pulsing glow animation for current step */
@keyframes pulseGlow {
  0%, 100% {
    box-shadow:
      0 0 0 4px rgba(var(--step-accent-rgb), 0.15),
      0 0 12px rgba(var(--step-accent-rgb), 0.4),
      0 4px 12px rgba(0, 0, 0, 0.15);
  }
  50% {
    box-shadow:
      0 0 0 4px rgba(var(--step-accent-rgb), 0.25),
      0 0 20px rgba(var(--step-accent-rgb), 0.6),
      0 4px 12px rgba(0, 0, 0, 0.15);
  }
}

/* Completed Step - Success green with checkmark */
.wizard-progress-compact__step[data-completed="true"] .wizard-progress-compact__dot {
  background: var(--color-success);
  border-color: var(--color-success);
  color: white;
  box-shadow: 0 2px 6px rgba(16, 185, 129, 0.3);
}

/* Checkmark for completed steps */
.wizard-progress-compact__step[data-completed="true"] .wizard-progress-compact__dot::before {
  content: '✓';
  font-size: 13px;
  font-weight: 700;
}

/* Hide number when completed */
.wizard-progress-compact__step[data-completed="true"] .wizard-progress-compact__dot {
  font-size: 0;
}

.wizard-progress-compact__step[data-completed="true"] .wizard-progress-compact__dot::before {
  font-size: 13px;
}

/* Hover effect for enabled steps */
.wizard-progress-compact__step:not(:disabled):hover .wizard-progress-compact__dot {
  transform: scale(1.1);
  border-color: var(--step-accent);
  box-shadow: 0 0 0 3px rgba(var(--step-accent-rgb), 0.1);
}

/* Don't apply hover to current step (already scaled) */
.wizard-progress-compact__step[data-current="true"]:hover .wizard-progress-compact__dot {
  transform: scale(1.15);
}

/* Responsive: Hide on mobile */
@media (max-width: 900px) {
  .wizard-progress-compact {
    display: none;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .wizard-progress-compact__dot {
    transition: none;
    animation: none;
    transform: none !important;
  }

  .wizard-progress-compact__step[data-current="true"] .wizard-progress-compact__dot {
    animation: none;
  }
}

.theme-toggle {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  margin-left: 0;
  flex-wrap: wrap;
}

.theme-toggle__label {
  font-size: var(--font-size-xs);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.theme-toggle__options {
  display: flex;
  gap: var(--space-xs);
}

.theme-toggle__option {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 44px;
  min-height: 44px;
  padding: 0 var(--space-sm);
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  color: var(--color-muted);
  font-weight: 600;
  cursor: pointer;
  transition: border-color var(--transition-duration) var(--transition-easing),
    background-color var(--transition-duration) var(--transition-easing),
    color var(--transition-duration) var(--transition-easing),
    box-shadow var(--transition-duration) var(--transition-easing);
}

.theme-toggle__option input {
  position: absolute;
  inset: 0;
  margin: 0;
  opacity: 0;
  cursor: pointer;
}

.theme-toggle__option span {
  pointer-events: none;
}

.theme-toggle__option input:focus-visible + span {
  outline: var(--focus-ring-width) solid var(--color-focus);
  outline-offset: var(--focus-ring-offset);
}

.theme-toggle__option:hover,
.theme-toggle__option:focus-visible {
  border-color: var(--color-primary);
  color: var(--color-text);
  box-shadow: 0 8px 20px hsla(210, 94%, 26%, 0.12);
}

.theme-toggle__option--active {
  border-color: transparent;
  background: var(--color-primary);
  color: #fff;
  box-shadow: 0 12px 28px hsla(210, 94%, 32%, 0.25);
}

@media (max-width: 720px) {
  .theme-toggle {
    order: 3;
    width: 100%;
    justify-content: flex-start;
  }

  .theme-toggle__options {
    width: 100%;
    justify-content: flex-start;
  }
}

.brand {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  cursor: default;
  user-select: none;
}

.brand__logo {
  width: 40px;
  height: 40px;
  border-radius: 0.75rem;
}

.brand__title {
  font-weight: 600;
  font-size: var(--font-size-md);
}

.wizard-main {
  flex: 1 1 auto;
  min-width: 0;
  width: 100%;
  /* Removed min-height: 0 to allow content to expand naturally */
  max-width: 1200px;
  margin: 0 auto;
  padding: clamp(var(--space-lg), 4vw, var(--space-xl)) var(--page-gutter);
  padding-bottom: calc(clamp(var(--space-lg), 4vw, var(--space-xl)) + env(safe-area-inset-bottom, 0px));
  padding-left: calc(var(--page-gutter) + env(safe-area-inset-left, 0px));
  padding-right: calc(var(--page-gutter) + env(safe-area-inset-right, 0px));
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: clamp(var(--space-lg), 3vw, var(--space-xl));
  background: var(--color-background);
  /* Removed overflow-y: auto to fix excessive scrolling - let body handle scroll naturally */
}

.wizard-screen {
  /* Always use flex display - never change to 'none' */
  display: none !important;
  flex-direction: column;
  width: 100%;
  max-width: var(--content-max-width);
  margin: 0 auto;
  border-radius: var(--radius-lg);
  border: none;
  padding: 0;
}

.wizard-screen--active {
  /* Active screen is visible and controls container height */
  display: flex !important;
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* Remove conflicting rules - no longer needed */
/* .wizard-screen[hidden] and forced display:none rules removed */

.wizard-screen__inner {
  flex: 1;
  width: 100%;
  max-width: var(--content-max-width);
  min-width: 0;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: var(--space-6);
  padding: var(--space-6);
  padding-bottom: calc(80px + var(--space-6));
  background: var(--color-background);
  border: none;
  border-radius: 0;
  box-shadow: none;
  transition: none;
  box-sizing: border-box;
}

/* Force consistent width for all screens */
.wizard-screen__inner * {
  box-sizing: border-box;
}

/* Welcome Screen */
.wizard-shell[data-active-step="welcome"] .wizard-sidebar {
  display: none;
}

.wizard-shell[data-active-step="welcome"] {
  padding-left: 0;
}

.wizard-screen__inner--centered {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100%;
}

.welcome-container {
  width: 100%;
  max-width: 1200px;
  text-align: center;
}

.welcome-title {
  font-size: clamp(2rem, 4vw, 3rem);
  font-weight: 700;
  margin: 0 0 var(--space-3);
  background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-dark) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.welcome-subtitle {
  font-size: clamp(1rem, 2vw, 1.25rem);
  color: var(--color-text-secondary);
  margin: 0 0 var(--space-8);
}

.template-selection {
  margin-top: var(--space-6);
}

.template-selection__title {
  font-size: clamp(1.5rem, 2.5vw, 2rem);
  font-weight: 600;
  margin: 0 0 var(--space-2);
  color: var(--color-text-primary);
}

.template-selection__description {
  font-size: 1rem;
  color: var(--color-text-secondary);
  margin: 0 0 var(--space-6);
}

.template-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: var(--space-6);
  margin-top: var(--space-6);
}

@media (max-width: 768px) {
  .template-grid {
    grid-template-columns: 1fr;
  }
}

.template-card {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: var(--space-4);
  padding: var(--space-8);
  background: var(--color-surface);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-lg);
  text-align: left;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.04);
}

.template-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, var(--color-primary), var(--color-primary-dark));
  opacity: 0;
  transition: opacity 0.2s ease;
}

.template-card:hover {
  border-color: var(--color-primary);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12), 0 2px 6px rgba(0, 0, 0, 0.08);
  transform: translateY(-8px);
}

.template-card:hover::before {
  opacity: 1;
}

.template-card:active {
  transform: translateY(0);
}

.template-card:focus-visible {
  outline: 3px solid var(--color-focus);
  outline-offset: 2px;
}

/* Selected template card */
.template-card--selected {
  border-color: var(--color-primary);
  border-width: 3px;
  background: linear-gradient(135deg,
    color-mix(in srgb, var(--color-primary) 5%, var(--color-surface)) 0%,
    var(--color-surface) 100%);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary) 15%, transparent);
}

.template-card--selected::before {
  opacity: 1;
}

.template-card__icon {
  font-size: 2.5rem;
  line-height: 1;
}

.template-card__content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.template-card__title {
  font-size: 1.25rem;
  font-weight: 600;
  margin: 0;
  color: var(--color-text);
}

.template-card__description {
  font-size: 0.9375rem;
  margin: 0;
  color: var(--color-text-secondary);
  line-height: 1.5;
}

.template-card__specs {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  margin-top: var(--space-2);
}

.spec-badge {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  background: rgba(14, 118, 253, 0.1);
  border: 1px solid rgba(14, 118, 253, 0.3);
  border-radius: var(--radius-full);
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--color-primary);
  transition: all 0.2s ease;
}

.spec-badge:hover {
  background: rgba(14, 118, 253, 0.15);
  border-color: var(--color-primary);
}

/* Difficulty Badge */
.difficulty-badge {
  position: absolute;
  top: var(--space-4);
  right: var(--space-4);
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: var(--radius-full);
  font-size: 0.75rem;
  font-weight: 600;
  line-height: 1;
  transition: all 0.2s ease;
}

.difficulty-badge--beginner {
  background: rgba(34, 197, 94, 0.1);
  border: 1px solid rgba(34, 197, 94, 0.3);
  color: #16a34a;
}

.difficulty-badge--intermediate {
  background: rgba(234, 179, 8, 0.1);
  border: 1px solid rgba(234, 179, 8, 0.3);
  color: #ca8a04;
}

.difficulty-badge--advanced {
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.3);
  color: #dc2626;
}

/* Time Estimate */
.time-estimate {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  font-weight: 500;
}

.time-estimate::before {
  content: "⏱";
  font-size: 1rem;
}

/* Template Card Preview */
.template-card__preview {
  margin-top: var(--space-2);
  padding: var(--space-4);
  background: rgba(14, 118, 253, 0.03);
  border: 1px solid rgba(14, 118, 253, 0.1);
  border-radius: var(--radius-md);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  max-height: 0;
  opacity: 0;
  overflow: hidden;
}

.template-card:hover .template-card__preview {
  max-height: 200px;
  opacity: 1;
  margin-top: var(--space-4);
}

.template-card__preview-title {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 var(--space-2) 0;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.template-card__preview-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.template-card__preview-item {
  display: flex;
  justify-content: space-between;
  font-size: 0.8125rem;
  line-height: 1.4;
}

.template-card__preview-label {
  color: var(--color-text-secondary);
  font-weight: 500;
}

.template-card__preview-value {
  color: var(--color-text);
  font-weight: 600;
  text-align: right;
}

/* Template Card Icon */
.template-card__icon {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(14, 118, 253, 0.1);
  border-radius: 50%;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.template-card:hover .template-card__icon {
  transform: scale(1.1);
  background: rgba(14, 118, 253, 0.15);
}

.template-card__icon svg {
  width: 24px;
  height: 24px;
  fill: var(--color-primary);
}

/* Staggered Fade-in Animation */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.template-card {
  animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) backwards;
}

.template-card:nth-child(1) {
  animation-delay: 0.1s;
}

.template-card:nth-child(2) {
  animation-delay: 0.2s;
}

.template-card:nth-child(3) {
  animation-delay: 0.3s;
}

.template-card:nth-child(4) {
  animation-delay: 0.4s;
}

/* Enhanced Selection State */
.template-card[aria-pressed="true"],
.template-card.selected {
  border-color: var(--color-primary);
  background: rgba(14, 118, 253, 0.03);
  box-shadow: 0 0 0 3px rgba(14, 118, 253, 0.1), 0 8px 24px rgba(0, 0, 0, 0.12);
  transform: translateY(-4px);
}

.template-card[aria-pressed="true"] .template-card__icon,
.template-card.selected .template-card__icon {
  background: rgba(14, 118, 253, 0.2);
  transform: scale(1.05);
}

/* Difficulty Badge Pulse on Hover */
.template-card:hover .difficulty-badge {
  transform: scale(1.05);
}

/* Time Estimate Icon Animation */
@keyframes tickTock {
  0%, 100% {
    transform: rotate(-5deg);
  }
  50% {
    transform: rotate(5deg);
  }
}

.template-card:hover .time-estimate::before {
  display: inline-block;
  animation: tickTock 1s ease-in-out infinite;
}

@media (max-width: 768px) {
  .template-grid {
    grid-template-columns: 1fr;
  }

  .welcome-title {
    font-size: 2rem;
  }

  .template-selection__title {
    font-size: 1.5rem;
  }
}

/* Card-based layout system */
.form-card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: var(--space-6);
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  box-shadow: var(--shadow-xs);
  /* Changed from 'transition: all' to specific properties to prevent layout glitches with position:fixed buttons */
  transition: box-shadow var(--transition-base), border-color var(--transition-base), background-color var(--transition-base);
  width: 100%;
  max-width: var(--content-max-width);
  margin: 0 auto;
  box-sizing: border-box;
}

.form-card:hover {
  box-shadow: var(--shadow-sm);
  border-color: var(--color-border-strong);
}

.form-card__header {
  padding-bottom: var(--space-3);
  border-bottom: 1px solid var(--color-border);
  margin-bottom: var(--space-2);
}

.form-card__title {
  font-size: var(--text-lg);
  font-weight: 600;
  color: var(--color-ink);
  margin: 0;
}

.form-card__description {
  font-size: var(--text-sm);
  color: var(--color-muted);
  margin: var(--space-2) 0 0 0;
  line-height: 1.5;
}

.form-card__body {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.form-card__footer {
  padding-top: var(--space-3);
  border-top: 1px solid var(--color-border);
  margin-top: var(--space-2);
  display: flex;
  gap: var(--space-3);
  justify-content: flex-end;
}

/* Compact card variant */
.form-card--compact {
  padding: var(--space-4);
  gap: var(--space-3);
}

/* Highlighted card variant */
.form-card--highlight {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
}

/* Error card variant */
.form-card--error {
  border-color: var(--color-error);
  background: var(--color-error-light);
}

/* Export Options */
.export-option {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-4);
  padding: var(--space-4);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  background: var(--color-background);
  transition: all 0.2s ease;
}

.export-option:hover {
  border-color: var(--color-primary);
  background: var(--color-surface);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.export-option + .export-option {
  margin-top: var(--space-4);
}

.export-option__header {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  flex: 1;
}

.export-option__icon {
  flex-shrink: 0;
  color: var(--color-primary);
}

.export-option__title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 var(--space-1) 0;
}

.export-option__description {
  font-size: 0.875rem;
  color: var(--color-text-muted);
  margin: 0;
  line-height: 1.5;
}

/* Grid layout for cards */
.form-card-grid {
  display: grid;
  gap: var(--space-4);
  grid-template-columns: 1fr;
}

@media (min-width: 768px) {
  .form-card-grid--2col {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Field group within cards */
.field-group {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

/* Configuration Overview */
.config-overview {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.config-overview__item {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  padding: var(--space-3);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-sm);
  gap: var(--space-4);
}

.config-overview__label {
  font-weight: 500;
  color: var(--color-text-secondary);
  flex-shrink: 0;
}

.config-overview__value {
  font-weight: 600;
  color: var(--color-text-primary);
  text-align: right;
  word-break: break-word;
}

.field-group--row {
  flex-direction: row;
  align-items: center;
  gap: var(--space-3);
}

.field-hint {
  font-size: var(--font-size-sm);
  color: var(--color-muted);
  line-height: 1.5;
  margin: 0;
}

.field-hint code {
  background: var(--color-bg-tertiary);
  padding: 2px 6px;
  border-radius: var(--radius-xs);
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
  font-size: 0.9em;
  color: var(--color-text-primary);
  border: 1px solid var(--color-border);
}

.field-hint ul {
  list-style-type: disc;
}

.field-hint li {
  margin-bottom: var(--space-1);
}

/* Supply Mode Selector */
.supply-mode-selector {
  display: flex;
  gap: var(--space-4);
  margin-bottom: var(--space-3);
  padding: var(--space-3);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
}

.supply-mode-selector[hidden] {
  display: none;
}

/* Supply Conversion Display */
.supply-conversion {
  display: flex;
  align-items: baseline;
  gap: var(--space-2);
  margin-top: var(--space-2);
  padding: var(--space-3);
  background: var(--color-info-light);
  border-left: 3px solid var(--color-info);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
}

.supply-conversion[hidden] {
  display: none;
}

.supply-conversion__label {
  color: var(--color-muted);
  font-weight: 500;
}

.supply-conversion__value {
  color: var(--color-text);
  font-weight: 600;
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
}

.supply-conversion__unit {
  color: var(--color-muted);
  font-size: 0.9em;
}

@media (max-width: 767px) {
  .field-group--row {
    flex-direction: column;
    align-items: stretch;
  }

  .supply-mode-selector {
    flex-direction: column;
    gap: var(--space-2);
  }
}

.wizard-form {
  display: flex;
  flex-direction: column;
  gap: clamp(var(--space-lg), 2vw, var(--space-xl));
  flex: 1;
  width: 100%;
  max-width: var(--content-max-width);
  margin: 0 auto;
  position: static;
}

.wizard-form--narrow {
  max-width: var(--content-max-width);
  align-self: center;
}

.wizard-screen__title {
  font-size: clamp(1.75rem, 1.5vw + 1.4rem, 2.25rem);
  margin: 0;
  text-align: left;
  line-height: 1.15;
  align-self: stretch;
  max-width: 100%;
}

.wizard-screen__subtitle {
  margin: 0 0 var(--space-lg);
  color: var(--color-muted);
  max-width: 100%;
  text-align: left;
}

.wizard-screen__body {
  margin: 0;
  font-size: var(--font-size-sm);
  color: var(--color-text);
  line-height: 1.6;
}

.wizard-screen__body--muted {
  color: var(--color-muted);
}

.wizard-field__label-row {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  margin-bottom: var(--space-2xs);
}

.wizard-info-trigger {
  width: 22px;
  height: 22px;
  border-radius: 999px;
  border: 1px solid var(--color-border);
  background: var(--color-surface-alt);
  color: var(--color-muted);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  cursor: pointer;
  transition: border-color var(--transition-duration) var(--transition-easing),
    background-color var(--transition-duration) var(--transition-easing),
    color var(--transition-duration) var(--transition-easing);
}

.wizard-info-trigger:focus-visible,
.wizard-info-trigger:hover {
  border-color: var(--color-primary);
  color: var(--color-primary);
  background: var(--color-surface);
  outline: none;
}

.wizard-info-trigger[aria-expanded="true"] {
  border-color: var(--color-primary);
  color: var(--color-primary);
  background: var(--color-surface);
}

.wizard-info-trigger__icon {
  font-size: 0.75rem;
  font-weight: 700;
  line-height: 1;
}

.wizard-info-panel {
  margin: 0 0 var(--space-sm);
  padding: var(--space-xs) var(--space-sm);
  border-left: 3px solid var(--color-border);
  background: var(--color-surface-alt);
  color: var(--color-muted);
  font-size: var(--font-size-xs);
}

.wizard-info-panel[hidden] {
  display: none;
}

.wizard-info-panel__body {
  margin: 0;
}

.wizard-group-sheet {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  background: var(--color-surface);
  box-shadow: var(--shadow-xs);
  padding: var(--space-md) clamp(var(--space-md), 4vw, var(--space-xl));
}

.wizard-group-sheet__summary,
.wizard-group-card__summary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-sm);
  cursor: pointer;
  list-style: none;
  font-weight: 600;
}

.wizard-group-sheet__summary {
  padding: 0;
}

.wizard-group-sheet__summary::-webkit-details-marker,
.wizard-group-card__summary::-webkit-details-marker {
  display: none;
}

.wizard-group-sheet__indicator,
.wizard-group-card__summary-indicator {
  width: 12px;
  height: 12px;
  border-right: 2px solid var(--color-muted);
  border-bottom: 2px solid var(--color-muted);
  transform: rotate(45deg);
  transition: transform var(--transition-duration) var(--transition-easing),
    border-color var(--transition-duration) var(--transition-easing);
}

.wizard-group-sheet[open] .wizard-group-sheet__indicator,
.wizard-group-card[open] .wizard-group-card__summary-indicator {
  transform: rotate(225deg);
  border-color: var(--color-primary);
}

.wizard-group-sheet__body {
  display: grid;
  gap: var(--space-lg);
  margin-top: var(--space-md);
}

.wizard-group-list {
  display: grid;
  gap: var(--space-md);
}

.wizard-group-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  background: var(--color-surface);
  box-shadow: var(--shadow-xs);
  overflow: hidden;
}

.wizard-group-card + .wizard-group-card {
  margin-top: var(--space-md);
}

.wizard-group-card__summary {
  padding: var(--space-md);
}

.wizard-group-card__title {
  font-weight: 600;
  margin: 0;
}

.wizard-group-card__badge {
  display: inline-flex;
  align-items: center;
  padding: 0 var(--space-2xs);
  border-radius: var(--radius-sm);
  background: var(--color-primary);
  color: #fff;
  font-size: var(--font-size-xs);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.wizard-group-card__body {
  display: grid;
  gap: var(--space-lg);
  padding: 0 var(--space-md) var(--space-lg);
  border-top: 1px solid var(--color-border);
}

.wizard-group-card__required-power {
  max-width: 180px;
}

.wizard-group-card__members {
  display: grid;
  gap: var(--space-sm);
}

.wizard-group-card__members .wizard-button {
  justify-self: flex-start;
  margin-top: var(--space-xs);
}

.wizard-group-card__members-title {
  margin: 0;
  font-size: var(--font-size-sm);
  font-weight: 600;
}

.wizard-group-card__members-list {
  display: grid;
  gap: var(--space-sm);
}

.wizard-group-card__members-list > .wizard-subsection__hint {
  margin: 0;
}

.wizard-group-card__member-row {
  display: grid;
  grid-template-columns: auto minmax(0, 2fr) minmax(160px, 1fr) max-content;
  gap: var(--space-sm);
  align-items: center;
}

.wizard-group-card__member-label {
  font-weight: 600;
}

.wizard-group-card__member-select {
  width: 100%;
}

.wizard-group-card__member-power-field {
  display: grid;
  gap: var(--space-2xs);
}

.wizard-group-card__member-power-label {
  font-size: var(--font-size-xs);
  font-weight: 600;
  color: var(--color-muted);
}

.wizard-group-card__member-power {
  width: 100%;
  max-width: 140px;
}

.wizard-group-card__member-actions,
.wizard-group-card__actions {
  display: flex;
  gap: var(--space-sm);
  justify-content: flex-end;
  flex-wrap: wrap;
}

.wizard-group-card--primary {
  border-color: var(--color-primary);
  box-shadow: var(--shadow-sm);
}

.wizard-group-controls {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-sm);
  margin-top: var(--space-md);
}

.wizard-field__inline {
  display: grid;
  gap: var(--space-xs);
  align-items: flex-start;
}

.wizard-field__input--condensed {
  max-width: 140px;
}

.wizard-field__label--secondary {
  font-size: var(--font-size-xs);
  font-weight: 600;
  color: var(--color-muted);
}

.wizard-field--stacked {
  display: grid;
  gap: var(--space-2xs);
  margin-top: var(--space-sm);
}

.wizard-group-list {
  display: grid;
  gap: var(--space-md);
  margin-top: var(--space-lg);
}


#wizard-permissions-group .wizard-actions {
  margin-top: var(--space-lg);
}


.wizard-screen__help {
  margin: calc(-1 * var(--space-sm)) 0 var(--space-md);
  color: var(--color-muted);
  font-size: var(--font-size-sm);
}

.wizard-link {
  color: var(--color-primary);
  text-decoration: underline;
}

.wizard-link:focus,
.wizard-link:hover {
  color: var(--color-primary-dark);
}

.wizard-hint {
  margin: var(--space-sm) 0;
  color: var(--color-muted);
  font-size: var(--font-size-xs);
}

.registration-methods {
  display: grid;
  gap: var(--space-sm);
  margin-bottom: var(--space-lg);
}

.registration-methods__title {
  margin: 0;
  font-size: var(--font-size-sm);
  font-weight: 600;
  color: var(--color-muted);
}

.registration-methods__options {
  gap: var(--space-md);
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}

.registration-panel {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  padding: clamp(var(--space-md), 2vw, var(--space-lg));
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  background: var(--color-surface);
  box-shadow: none;
  box-sizing: border-box;
  max-width: 100%;
  overflow: hidden;
}

.registration-panel pre {
  max-width: 100%;
  overflow-x: auto;
  word-wrap: break-word;
  white-space: pre-wrap;
  box-sizing: border-box;
  margin: 0;
}

.registration-panel .form-card {
  box-sizing: border-box;
  max-width: 100%;
  margin: 0;
  width: 100%;
}

.registration-panel .form-card__body {
  box-sizing: border-box;
  max-width: 100%;
}

.registration-panel .wizard-json {
  box-sizing: border-box;
  max-width: 100%;
  overflow: hidden;
}

.registration-panel .wizard-json__code {
  box-sizing: border-box;
  max-width: 100%;
  overflow-x: auto;
  word-wrap: break-word;
}

.registration-panel button {
  box-sizing: border-box;
}

.registration-panel .wizard-inline {
  box-sizing: border-box;
  max-width: 100%;
}

.registration-panel + .registration-panel {
  margin-top: var(--space-lg);
}

.registration-panel__title {
  margin: 0;
  font-size: var(--font-size-sm);
  font-weight: 600;
  color: var(--color-muted);
}

.registration-panel[hidden] {
  display: none;
}

.wallet-insights {
  display: grid;
  gap: var(--space-xs);
  margin: var(--space-md) 0 var(--space-sm);
  padding: 0;
}

.wallet-insights__item {
  display: grid;
  gap: var(--space-2xs);
}

.wallet-insights__label {
  margin: 0;
  font-size: var(--font-size-xs);
  font-weight: 600;
  color: var(--color-muted);
}

.wallet-insights__value {
  margin: 0;
  font-family: "SFMono-Regular", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  word-break: break-all;
}

.registration-self-warning {
  display: grid;
  gap: var(--space-sm);
  margin-top: var(--space-lg);
  align-items: flex-start;
}

.registration-self-warning .wizard-button {
  justify-self: start;
}

.wizard-inline {
  display: flex;
  gap: var(--space-sm);
  align-items: center;
  margin: var(--space-sm) 0;
}

.wizard-field {
  display: grid;
  gap: var(--space-xs);
  margin: 0;
}

.localization-section {
  margin-top: var(--space-xl);
  padding: clamp(var(--space-md), 3vw, var(--space-lg));
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  background: var(--color-surface);
  display: flex;
  flex-direction: column;
  gap: clamp(var(--space-md), 2vw, var(--space-lg));
  box-shadow: none;
}

.localization-section__header {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.localization-section__lead {
  color: var(--color-muted);
  font-size: var(--font-size-xs);
}


.localization-empty {
  display: flex;
  justify-content: flex-end;
  margin-left: auto;
}

.localization-empty:empty {
  display: none;
}

.localization-empty[hidden] {
  display: none;
}

.localization-empty .wizard-button {
  padding-inline: clamp(var(--space-sm), 2vw, var(--space-lg));
}

.localization-wrapper {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.localization-wrapper[hidden] {
  display: none;
}

.localization-section__list {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
}

.localization-section__message {
  min-height: 1.25rem;
  color: var(--color-muted);
  font-size: var(--font-size-xs);
}

@media (min-width: 480px) {
  .localization-section__header {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-sm);
  }

  .localization-empty {
    justify-content: flex-end;
    align-self: flex-end;
    margin-top: calc(-1 * var(--space-sm));
  }
}

.localization-row {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  background: var(--color-surface);
  padding: clamp(var(--space-md), 2vw, var(--space-lg));
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
  box-shadow: none;
}

.localization-row__header {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: var(--space-sm);
  align-items: start;
}

.localization-row__field--code {
  flex: 1;
}

.localization-row__fields {
  display: grid;
  gap: var(--space-md);
  padding: var(--space-4);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  margin-top: var(--space-2);
}

.localization-row__fields[hidden] {
  display: none;
}

.localization-row__grid {
  display: grid;
  gap: var(--space-md);
}

.localization-row__checkbox .wizard-checkbox__label {
  white-space: normal;
}

@media (min-width: 600px) {
  .localization-section {
    gap: var(--space-lg);
  }

  .localization-row__header {
    grid-template-columns: minmax(0, 1fr) auto;
    align-items: center;
    column-gap: var(--space-md);
  }

  .localization-row__checkbox .wizard-checkbox__label {
    white-space: nowrap;
  }

  .localization-row__grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

/* Keywords & Description */
.keywords-preview {
  padding: var(--space-4);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
}

.keywords-tag-container {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.keyword-tag {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: 4px 12px;
  background: var(--color-primary);
  color: var(--color-primary-contrast);
  border-radius: var(--radius-full);
  font-size: 0.875rem;
  font-weight: 500;
  line-height: 1.5;
}

.keyword-tag--empty {
  background: var(--color-bg-tertiary);
  color: var(--color-text-secondary);
  font-style: italic;
}

@media (max-width: 480px) {
  .keyword-tag {
    font-size: 0.8125rem;
    padding: 3px 10px;
  }
}

.wizard-fieldset {
  border: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}
.wizard-fieldset > legend {
  margin-bottom: var(--space-xs);
  font-weight: 600;
}


.wizard-choice {
  display: flex;
  align-items: flex-start;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  min-height: 48px;
  background: var(--color-surface-alt);
  box-shadow: none;
  cursor: pointer;
  transition: border-color var(--transition-duration) var(--transition-easing),
    background-color var(--transition-duration) var(--transition-easing),
    box-shadow var(--transition-duration) var(--transition-easing);
}

.wizard-choice__input {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  margin-top: 2px;
}

.wizard-choice__content {
  display: flex;
  flex-direction: column;
  gap: var(--space-2xs);
}

.wizard-choice__title {
  font-weight: 600;
}

.wizard-choice__hint {
  color: var(--color-muted);
  font-size: var(--font-size-xs);
}

.wizard-choice-group {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.wizard-choice:hover,
.wizard-choice:focus-within {
  border-color: var(--color-primary);
  background: var(--color-surface);
  box-shadow: var(--shadow-xs);
}

.wizard-choice--selected {
  border-color: var(--color-primary);
  background: var(--color-surface);
  box-shadow: var(--shadow-sm);
}

.wizard-field--checkbox {
  margin-bottom: 0;
}

.wizard-checkbox {
  display: flex;
  align-items: flex-start;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  background: var(--color-surface-alt);
  box-shadow: none;
  cursor: pointer;
  transition: border-color var(--transition-duration) var(--transition-easing),
    background-color var(--transition-duration) var(--transition-easing),
    box-shadow var(--transition-duration) var(--transition-easing);
}

.wizard-checkbox__input {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  margin-top: 2px;
}

.wizard-checkbox__label {
  display: flex;
  flex-direction: column;
  gap: var(--space-2xs);
  flex: 1;
}

.wizard-checkbox__title {
  font-weight: 600;
}

.wizard-checkbox__hint {
  color: var(--color-muted);
  font-size: var(--font-size-xs);
  font-weight: 400;
}

.wizard-checkbox:hover,
.wizard-checkbox:focus-within {
  border-color: var(--color-primary);
  background: var(--color-surface);
  box-shadow: var(--shadow-xs);
}

.wizard-checkbox--checked {
  border-color: var(--color-primary);
  background: var(--color-surface);
  box-shadow: var(--shadow-sm);
}

.wizard-field__label {
  font-weight: 600;
  font-size: var(--text-sm);
  color: var(--color-ink);
  margin-bottom: var(--space-2);
  display: block;
}

.wizard-field__input {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  font-size: 1rem;
  padding: 12px 16px;
  border-radius: var(--radius-md);
  border: 1px solid var(--color-smoke);
  background: var(--color-surface);
  color: var(--color-ink);
  width: 100%;
  min-height: 48px;
  transition: all var(--transition-base);
  box-shadow: none;
}

textarea.wizard-field__input {
  resize: vertical;
  min-height: 120px;
  line-height: 1.5;
}

.wizard-field__input:focus-visible {
  border: 2px solid var(--color-primary);
  outline: var(--focus-ring-width) solid var(--color-focus);
  outline-offset: var(--focus-ring-offset);
  padding: 11px 15px;
  box-shadow: none;
}

.wizard-field__input:hover:not(:disabled):not(:focus-visible) {
  border-color: var(--color-border-strong);
}

.wizard-field__input::placeholder {
  color: var(--color-placeholder);
}

.wizard-field__input:disabled {
  background: var(--color-smoke);
  color: var(--color-muted);
  cursor: not-allowed;
  opacity: 0.6;
}

/* Input validation states */
.wizard-field__input.is-valid {
  border-color: var(--color-success);
}

.wizard-field__input.is-invalid {
  border-color: var(--color-error);
}

.wizard-field__message {
  font-size: var(--font-size-xs);
  min-height: 1.25em;
  color: var(--color-primary-dark);
}

.wizard-status-banner {
  margin: var(--space-sm) 0 0;
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-sm);
  background: transparent;
  transition: background-color var(--transition-duration) var(--transition-easing),
    color var(--transition-duration) var(--transition-easing);
}

.wizard-status-banner:empty {
  display: none;
  padding: 0;
}

.wizard-status-banner[data-status='loading'] {
  color: var(--color-primary);
  background-color: hsla(210, 94%, 92%, 0.6);
}

.wizard-status-banner[data-status='error'] {
  color: #b00020;
  background-color: rgba(176, 0, 32, 0.08);
}

.wizard-status-banner[data-status='success'] {
  color: #1b5e20;
  background-color: rgba(27, 94, 32, 0.08);
}

.wizard-status-banner[data-status='info'] {
  color: var(--color-primary);
  background-color: hsla(210, 94%, 92%, 0.4);
}

.wizard-actions {
  display: flex;
  gap: var(--space-sm);
  justify-content: flex-end;
  align-items: center;
  /* Removed flex-wrap to prevent button layout glitches */
  margin-top: auto;
}

.wizard-actions--between {
  justify-content: space-between;
}

.wizard-actions--end {
  justify-content: flex-end;
}

.wizard-actions--sticky {
  margin-top: 0 !important;
  position: fixed !important;
  bottom: 0 !important;
  left: var(--sidebar-width) !important;
  right: 440px !important; /* Space for expanded panel (380px + 60px margin) */
  width: auto !important;
  max-width: calc(1200px - var(--sidebar-width)) !important;
  margin-left: auto !important;
  margin-right: auto !important;
  padding: var(--space-md) !important;
  padding-left: calc(var(--space-md) + env(safe-area-inset-left, 0px)) !important;
  padding-right: calc(var(--space-md) + env(safe-area-inset-right, 0px)) !important;
  padding-bottom: calc(var(--space-md) + env(safe-area-inset-bottom, 0px)) !important;
  background: var(--color-background) !important;
  border-top: 1px solid var(--color-border) !important;
  box-shadow: var(--shadow-md) !important;
  z-index: 1000 !important;
  transform: none !important;
  isolation: isolate !important; /* Create isolated stacking context for WebKit */
  -webkit-font-smoothing: antialiased !important; /* WebKit rendering hint */
  transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              right 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* When panel is collapsed, expand action bar */
body.guide-panel-collapsed .wizard-actions--sticky {
  right: 90px !important; /* Just space for collapsed button (60px + 30px margin) */
}

.wizard-button {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  font-size: 1rem;
  font-weight: 600;
  padding: 12px 24px;
  border-radius: var(--radius-md);
  border: none;
  cursor: pointer;
  min-height: 44px;
  min-width: 120px;
  transition: all var(--transition-base);
  box-shadow: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
}

.wizard-button:focus-visible {
  outline: var(--focus-ring-width) solid var(--color-focus);
  outline-offset: var(--focus-ring-offset);
}

.wizard-button--primary {
  background: var(--color-primary);
  color: #ffffff;
  border: none;
}

.wizard-button--primary:hover:not(:disabled) {
  background: var(--color-primary-dark);
  box-shadow: var(--shadow-sm);
  transform: translateY(-1px);
}

.wizard-button--primary:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: var(--shadow-xs);
}

.wizard-button--secondary {
  background: var(--color-surface);
  border: 2px solid var(--color-primary);
  color: var(--color-primary);
}

.wizard-button--secondary:hover:not(:disabled) {
  background: var(--color-primary-light);
  border-color: var(--color-primary-dark);
  box-shadow: var(--shadow-xs);
}

.wizard-button--secondary:active:not(:disabled) {
  transform: translateY(0);
}

.wizard-button--danger {
  background: #dc2626;
  color: #ffffff;
  border: none;
}

.wizard-button--danger:hover:not(:disabled) {
  background: #b91c1c;
  box-shadow: var(--shadow-sm);
  transform: translateY(-1px);
}

.wizard-button--danger:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: var(--shadow-xs);
}

.wizard-button--small {
  padding: 8px 16px;
  min-height: 36px;
  min-width: 80px;
  font-size: 0.875rem;
}

.wizard-button--text {
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text-primary);
  padding: 6px 12px;
  min-height: 32px;
  min-width: auto;
  font-size: 0.875rem;
}

.wizard-button--text:hover:not(:disabled) {
  background: var(--color-bg-secondary);
  border-color: var(--color-primary);
  color: var(--color-primary);
}

.wizard-button:disabled,
.wizard-button[disabled] {
  cursor: not-allowed;
  opacity: 1 !important;
  background: #E5E7EB !important;
  color: #6B7280 !important;
  border: 2px solid #D1D5DB !important;
  box-shadow: none !important;
  transform: none !important;
  pointer-events: none;
}

.wizard-button--ghost {
  background: transparent;
  border: none;
  color: var(--color-slate);
  min-width: auto;
}

.wizard-button--ghost:hover:not(:disabled) {
  background: var(--color-smoke);
  color: var(--color-ink);
}

.wizard-options {
  display: grid;
  gap: var(--space-md);
  margin-bottom: var(--space-xl);
}

.wizard-option {
  display: block;
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  padding: clamp(var(--space-md), 2vw, var(--space-lg));
  border: 1px solid var(--color-border);
  cursor: pointer;
  box-shadow: none;
  transition: border-color var(--transition-duration) var(--transition-easing),
    transform var(--transition-duration) var(--transition-easing),
    box-shadow var(--transition-duration) var(--transition-easing),
    background-color var(--transition-duration) var(--transition-easing);
}

.wizard-option__input {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

.wizard-option__body {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.wizard-option__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-sm);
}

.wizard-option__title {
  font-size: var(--font-size-md);
  font-weight: 600;
}

.wizard-option__description {
  color: var(--color-muted);
  font-size: var(--font-size-xs);
}

.wizard-option__check {
  width: 1.5rem;
  aspect-ratio: 1 / 1;
  border-radius: 50%;
  border: 2px solid var(--color-primary);
  display: grid;
  place-items: center;
  flex: 0 0 auto;
  font-size: 0.9rem;
  font-weight: 700;
  color: var(--color-primary);
  background: hsla(210, 94%, 54%, 0.15);
  opacity: 0;
  transition: opacity var(--transition-duration) ease;
}

.wizard-option__check::before {
  content: '✓';
}

.wizard-option:focus-within,
.wizard-option:hover {
  border-color: var(--color-primary);
  transform: translateY(-2px);
  background: var(--color-surface);
  box-shadow: var(--shadow-xs);
}

.wizard-option--selected {
  border-color: var(--color-primary);
  background: var(--color-surface);
  box-shadow: var(--shadow-sm);
}

.wizard-option--selected .wizard-option__check {
  opacity: 1;
}

.wizard-qr {
  border-top: 1px solid var(--color-border);
  padding-top: var(--space-lg);
  margin-top: var(--space-lg);
  display: grid;
  gap: var(--space-md);
}

.wizard-qr__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-sm);
}

.wizard-qr__content {
  display: grid;
  gap: var(--space-md);
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
}

.wizard-qr__tile {
  background: var(--color-surface);
  border-radius: var(--radius-md);
  padding: var(--space-md);
  border: 1px solid var(--color-border);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.wizard-qr__tile canvas {
  max-width: 100%;
}

.wizard-qr__tile-label {
  position: absolute;
  top: var(--space-sm);
  left: var(--space-sm);
  padding: 0 var(--space-xs);
  border-radius: var(--radius-sm);
  background: rgba(26, 31, 44, 0.8);
  color: #fff;
  font-size: 0.75rem;
  font-weight: 600;
}

.wizard-qr__hint {
  margin: 0;
  color: var(--color-muted);
  font-size: var(--font-size-sm);
}

.wizard-json {
  border-top: 1px solid var(--color-border);
  padding-top: var(--space-lg);
  margin-top: var(--space-lg);
  display: grid;
  gap: var(--space-md);
}

.wizard-json__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-sm);
}

.wizard-json__code {
  margin: 0;
  padding: var(--space-md);
  background: var(--color-surface-alt);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  overflow-x: auto;
  overflow-y: auto;
  max-height: 400px;
  font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
  font-size: var(--font-size-sm);
  line-height: 1.5;
}

.wizard-warning {
  display: inline-flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  border-radius: var(--radius-md);
  background: rgba(255, 169, 77, 0.15);
  border: 1px solid rgba(255, 169, 77, 0.3);
  color: #aa5a12;
  font-weight: 600;
  margin-top: var(--space-md);
}

.wizard-warning__badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 1.5rem;
  height: 1.5rem;
  border-radius: 999px;
  background: rgba(255, 169, 77, 0.4);
  color: #aa5a12;
  font-weight: 700;
}


@media (max-width: var(--bp-md)) {
  .wizard-shell {
    flex-direction: column;
    padding-left: 0;
  }

  .wizard-sidebar {
    position: static;
    width: 100%;
    min-height: auto;
    border-right: none;
    border-bottom: 1px solid var(--color-border);
    box-shadow: var(--shadow-xs);
    padding: clamp(var(--space-lg), 6vw, var(--space-xl)) clamp(var(--space-lg), 6vw, var(--space-xl)) var(--space-lg);
    background: var(--color-surface);
    overscroll-behavior: auto;
  }

  .wizard-sidebar__footer {
    position: static;
    bottom: auto;
    margin-top: var(--space-md);
    padding-top: var(--space-sm);
    border-top: none;
    background: transparent;
    box-shadow: none;
    pointer-events: auto;
  }

  .wizard-sidebar__header {
    position: static;
    padding: 0;
    margin-bottom: var(--space-md);
    background: transparent;
    border-bottom: none;
    box-shadow: none;
  }

  .wizard-sidebar::before {
    display: none;
  }

  .wizard-path::before {
    display: none;
  }

  .wizard-path__item {
    padding-left: clamp(var(--space-md), 4vw, var(--space-lg));
  }

  .wizard-path__item::before {
    left: var(--space-sm);
  }

  .theme-toggle-box {
    position: static;
    width: 100%;
    backdrop-filter: none;
    box-shadow: var(--shadow-xs);
  }

  .wizard-sidebar .wizard-path {
    padding-left: 0;
  }

  .wizard-sidebar .wizard-subpath {
    padding-left: var(--space-md);
  }

  .wizard-path {
    gap: var(--space-sm);
  }

  .wizard-main {
    min-height: auto;
    align-items: stretch;
    padding-top: clamp(var(--space-lg), 8vw, var(--space-xl));
  }
}

@media (max-width: 900px) {
  .wizard-header__inner {
    grid-template-columns: minmax(0, 1fr) auto;
    grid-template-areas:
      'brand theme'
      'nav nav';
    row-gap: var(--space-sm);
  }

  .header-left {
    justify-self: start;
  }

  .header-center {
    justify-self: stretch;
  }

  .header-right {
    justify-self: end;
  }

  .wizard-group-card__member-row {
    grid-template-columns: auto minmax(0, 1fr) minmax(160px, auto);
  }

  .wizard-group-card__member-actions {
    grid-column: 2 / -1;
    justify-content: flex-start;
  }
}

/* Tablet optimization (600px - 900px) */
@media (min-width: 601px) and (max-width: 900px) {
  .wizard-screen__inner {
    padding: var(--space-6);
  }

  .form-card {
    padding: var(--space-5);
  }

  .wizard-button {
    min-height: 48px;
    padding: 14px 28px;
  }
}

/* Mobile optimization (max-width: 600px) */
@media (max-width: 600px) {
  .wizard-path {
    gap: var(--space-xs);
  }

  .wizard-main {
    align-items: stretch;
    padding: var(--space-4);
    padding-bottom: calc(var(--space-4) + env(safe-area-inset-bottom, 0px));
  }

  .wizard-screen {
    width: 100%;
    border-radius: var(--radius-md);
  }

  .wizard-screen__inner {
    max-width: none;
    padding: var(--space-4);
    gap: var(--space-4);
  }

  .wizard-screen__title {
    font-size: clamp(1.5rem, 5vw, 1.75rem);
  }

  /* Better mobile spacing for cards */
  .form-card {
    padding: var(--space-4);
    gap: var(--space-3);
  }

  .form-card__title {
    font-size: var(--text-base);
  }

  .form-card__body {
    gap: var(--space-3);
  }

  /* Improved touch targets for mobile */
  .wizard-button {
    min-height: 48px;
    padding: 14px 20px;
    font-size: 1rem;
  }

  .wizard-field__input {
    min-height: 52px;
    padding: 14px 16px;
    font-size: 16px; /* Prevents zoom on iOS */
  }

  .wizard-checkbox__input {
    min-width: 24px;
    min-height: 24px;
  }

  /* Stack button groups on mobile */
  .wizard-actions {
    flex-direction: column-reverse;
    gap: var(--space-3);
  }

  .wizard-actions .wizard-button {
    width: 100%;
  }

  .wizard-group-card__member-row {
    grid-template-columns: minmax(0, 1fr);
    row-gap: var(--space-xs);
  }

  .wizard-group-card__member-power {
    max-width: 100%;
  }

  .wizard-group-card__member-power-field,
  .wizard-group-card__member-actions {
    width: 100%;
  }

  /* Mobile-friendly form layouts */
  .field-group--row {
    flex-direction: column;
  }
}

/* Extra small mobile (max-width: 375px) */
@media (max-width: 375px) {
  .wizard-screen__inner {
    padding: var(--space-3);
  }

  .form-card {
    padding: var(--space-3);
    border-radius: var(--radius-md);
  }

  .wizard-screen__title {
    font-size: 1.5rem;
  }

  .wizard-main {
    padding: var(--space-3);
  }
}

@media (max-width: 600px) {
  .wizard-group-card__member-actions {
    justify-content: flex-start;
  }

  .wizard-header__inner {
    grid-template-columns: minmax(0, 1fr);
    grid-template-areas:
      'brand'
      'nav'
      'theme';
    row-gap: var(--space-sm);
    justify-items: stretch;
  }

  .header-left,
  .header-center,
  .header-right {
    width: 100%;
    justify-self: stretch;
  }

  .header-left {
    justify-content: flex-start;
  }

  .header-center,
  .header-right {
    justify-content: center;
  }

  .wizard-actions {
    gap: var(--space-sm);
  }

  .wizard-actions--sticky {
    padding: var(--space-sm) var(--space-md);
  }

  .theme-toggle {
    width: 100%;
    justify-content: center;
  }
}

@media (max-width: 480px) {
  .wizard-header__inner {
    padding: var(--space-sm) clamp(16px, 6vw, 20px);
  }

  .brand {
    gap: var(--space-xs);
  }

  .brand__logo {
    width: 32px;
    height: 32px;
  }

  .wizard-screen {
    padding: var(--space-md);
  }

  .wizard-screen__title {
    font-size: clamp(1.5rem, 4vw + 1.05rem, 2rem);
    max-width: none;
  }

  .wizard-actions {
    flex-direction: column;
    align-items: stretch;
  }

  .wizard-button {
    width: 100%;
  }

  .theme-toggle__options {
    width: 100%;
    justify-content: space-between;
  }

  .theme-toggle__option {
    flex: 1 1 auto;
    min-width: 0;
    text-align: center;
  }
}

@media (max-width: 350px) {
  .pill {
    min-width: 2.5rem;
    padding: 0 var(--space-2xs);
    font-size: 0.7rem;
  }

  .brand__title {
    font-size: clamp(0.95rem, 4vw, 1.05rem);
  }
}

/* ==== BG-SMOOTH v4 (append-only, safe) ==== */
:root {
  /* Light defaults */
  --page-bg-start: hsl(220 20% 98%);
  --page-bg-mid:   hsl(220 16% 95%);
  --page-bg-end:   hsl(220 14% 92%);
  /* Very subtle grain to prevent banding */
  --page-bg-noise: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.2' numOctaves='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='matrix' values='1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 0.006 0'/%3E%3C/filter%3E%3Crect width='24' height='24' filter='url(%23n)'/%3E%3C/svg%3E");
  color-scheme: light dark; /* allow UA to adjust native widgets */
}

/* If user explicitly chose dark */
html[data-theme="dark"] {
  --page-bg-start: hsl(220 22% 20%);
  --page-bg-mid:   hsl(220 24% 16%);
  --page-bg-end:   hsl(220 26% 12%);
}

/* Honor OS preference when not forced to light */
@media (prefers-color-scheme: dark) {
  html:not([data-theme="light"]) {
    --page-bg-start: hsl(220 22% 20%);
    --page-bg-mid:   hsl(220 24% 16%);
    --page-bg-end:   hsl(220 26% 12%);
  }
}

/* Page background spans the full scrollable document */
html,
body {
  min-height: 100%;
  /* Do NOT use background shorthand to avoid clobbering other props */
  background-image:
    var(--page-bg-noise),
    linear-gradient(180deg,
      var(--page-bg-start) 0%,
      var(--page-bg-mid)   55%,
      var(--page-bg-end)   100%);
  background-repeat: repeat, no-repeat;
  background-attachment: scroll, scroll; /* avoid fixed seams */
  background-color: var(--page-bg-end);  /* safe fallback */
}

/* Shell containers must be transparent so the page gradient shows through */
#wizard,
#wizard::before,
#wizard::after {
  background: transparent;
  background-image: none;
}
/* Note: .wizard-main, .wizard-container, and .wizard-screen removed from transparency rule
   to prevent content bleed-through. Only the #wizard wrapper remains transparent. */
/* ==== BG-SMOOTH v4 END ==== */

/* ========================================
   VALIDATION FEEDBACK STYLES
   ======================================== */

/* Valid input state - green border and checkmark */
.wizard-field__input--valid {
  border-color: var(--color-success, #10b981) !important;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%2310b981"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>');
  background-repeat: no-repeat;
  background-position: right 0.75rem center;
  background-size: 1.25rem 1.25rem;
  padding-right: 2.75rem;
}

/* Error input state - red border and X mark */
.wizard-field__input--error {
  border-color: var(--color-danger, #ef4444) !important;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%23ef4444"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/></svg>');
  background-repeat: no-repeat;
  background-position: right 0.75rem center;
  background-size: 1.25rem 1.25rem;
  padding-right: 2.75rem;
}

/* Success and danger colors for theme */
:root {
  --color-success: #10b981;
  --color-danger: #ef4444;
}

/* Dark theme adjustments */
html[data-theme="dark"] {
  --color-success: #34d399;
  --color-danger: #f87171;
}

@media (prefers-color-scheme: dark) {
  html:not([data-theme="light"]) {
    --color-success: #34d399;
    --color-danger: #f87171;
  }
}

/* ========================================
   DOCUMENT TYPES STYLES
   ======================================== */

/* Document Types List */
.document-types-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.document-type-item {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding: var(--space-4);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-md);
  background: var(--color-surface);
  transition: border-color 0.2s ease;
}

.document-type-item:hover {
  border-color: var(--color-border-strong);
}

.document-type-item__info {
  flex: 1;
  min-width: 0;
}

.document-type-item__name {
  font-weight: 600;
  color: var(--color-text);
  margin-bottom: var(--space-1);
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
}

.document-type-item__schema {
  font-size: 0.875rem;
  color: var(--color-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
}

.document-type-item__actions {
  display: flex;
  gap: var(--space-2);
  flex-shrink: 0;
  margin-left: var(--space-4);
}

.document-type-item__btn {
  padding: var(--space-2) var(--space-3);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-sm);
  background: var(--color-white);
  color: var(--color-muted);
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.document-type-item__btn:hover {
  border-color: var(--color-border-strong);
  color: var(--color-text);
  background: var(--color-smoke);
}

.document-type-item__btn--delete {
  color: var(--color-error);
}

.document-type-item__btn--delete:hover {
  background: var(--color-error-light);
  border-color: var(--color-error-border);
}

/* Document Modal */
.document-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-4);
}

.document-modal[hidden] {
  display: none;
}

.document-modal__overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
}

.document-modal__content {
  position: relative;
  z-index: 1;
  background: var(--color-white);
  border-radius: var(--border-radius-lg);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  width: 100%;
  max-width: 700px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

.document-modal__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-5) var(--space-6);
  border-bottom: 1px solid var(--color-border);
}

.document-modal__title {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.document-modal__close {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  color: var(--color-muted);
  font-size: 1.5rem;
  cursor: pointer;
  border-radius: var(--border-radius-sm);
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}

.document-modal__close:hover {
  background: var(--color-smoke);
  color: var(--color-text);
}

.document-modal__body {
  padding: var(--space-6);
  overflow-y: auto;
  flex: 1;
}

.document-modal__footer {
  display: flex;
  gap: var(--space-3);
  justify-content: flex-end;
  padding: var(--space-5) var(--space-6);
  border-top: 1px solid var(--color-border);
}

/* Code input styling */
.wizard-field__input--code {
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
  font-size: 0.875rem;
  line-height: 1.5;
  resize: vertical;
  min-height: 300px;
  white-space: pre;
  overflow-wrap: normal;
  overflow-x: auto;
}

/* Dark theme adjustments */
html[data-theme="dark"] .document-type-item {
  background: var(--color-surface);
  border-color: var(--color-border);
}

html[data-theme="dark"] .document-modal__content {
  background: var(--color-surface);
}

html[data-theme="dark"] .document-type-item__btn {
  background: var(--color-surface-alt);
  border-color: var(--color-border);
}

@media (prefers-color-scheme: dark) {
  html:not([data-theme="light"]) .document-type-item {
    background: var(--color-surface);
    border-color: var(--color-border);
  }

  html:not([data-theme="light"]) .document-modal__content {
    background: var(--color-surface);
  }

  html:not([data-theme="light"]) .document-type-item__btn {
    background: var(--color-surface-alt);
    border-color: var(--color-border);
  }
}

/* Mobile responsiveness */
@media (max-width: 600px) {
  .document-modal__content {
    max-width: 100%;
    max-height: 100vh;
    border-radius: 0;
  }

  .document-type-item {
    flex-direction: column;
    gap: var(--space-3);
  }

  .document-type-item__actions {
    margin-left: 0;
    width: 100%;
  }

  .document-type-item__btn {
    flex: 1;
  }
}

/* ========================================
   TEMPLATE CONFIRMATION MODAL
   ======================================== */

.modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-4);
}

.modal[hidden] {
  display: none;
}

.modal__overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
  animation: fadeIn 0.2s ease;
}

.modal__content {
  position: relative;
  background: #FFFFFF;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  max-width: 500px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  animation: slideUp 0.3s ease;
}

/* Dark mode for modal */
html[data-theme='dark'] .modal__content {
  background: #1E293B;
}

@media (prefers-color-scheme: dark) {
  html[data-theme='auto'] .modal__content {
    background: #1E293B;
  }
}

.modal__header {
  padding: var(--space-5);
  border-bottom: 1px solid var(--color-border);
}

.modal__title {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--color-text-primary);
}

.modal__body {
  padding: var(--space-5);
}

.modal__body p {
  margin: 0 0 var(--space-4);
  color: var(--color-text-secondary);
  line-height: 1.6;
}

.modal__warning {
  padding: var(--space-3);
  background: #FEF3C7;
  border-left: 3px solid #F59E0B;
  border-radius: var(--radius-sm);
  font-size: 0.9rem;
  color: #92400E;
  font-weight: 500;
}

/* Dark mode for modal warning */
html[data-theme='dark'] .modal__warning {
  background: rgba(245, 158, 11, 0.15);
  border-left-color: #FBBF24;
  color: #FCD34D;
}

@media (prefers-color-scheme: dark) {
  html[data-theme='auto'] .modal__warning {
    background: rgba(245, 158, 11, 0.15);
    border-left-color: #FBBF24;
    color: #FCD34D;
  }
}

.template-preview {
  background: #F9FAFB;
  border: 1px solid #E5E7EB;
  border-radius: var(--radius-md);
  padding: var(--space-4);
  margin: var(--space-4) 0;
}

/* Dark mode for template preview */
html[data-theme='dark'] .template-preview {
  background: #0F172A;
  border-color: #334155;
}

@media (prefers-color-scheme: dark) {
  html[data-theme='auto'] .template-preview {
    background: #0F172A;
    border-color: #334155;
  }
}

.template-preview h3 {
  margin: 0 0 var(--space-2);
  font-size: 1.1rem;
  color: var(--color-text-primary);
}

.template-preview p {
  margin: 0 0 var(--space-3);
  font-size: 0.95rem;
  color: var(--color-text-secondary);
}

.template-preview__features {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  margin-top: var(--space-3);
}

.template-preview__feature {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-2);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
  color: var(--color-text-secondary);
}

.modal__footer {
  padding: var(--space-5);
  border-top: 1px solid var(--color-border);
  display: flex;
  gap: var(--space-3);
  justify-content: flex-end;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (max-width: 600px) {
  .modal__footer {
    flex-direction: column;
  }
  
  .modal__footer .wizard-button {
    width: 100%;
  }
}

/* ═══════════════════════════════════════════════════════
   INLINE HELP SYSTEM
   ═══════════════════════════════════════════════════════ */

/* Page Guide Panel - Right Side */
.page-guide {
  position: fixed;
  right: 30px;
  top: 45px;
  width: var(--guide-width);
  max-height: calc(100vh - 65px);
  overflow-y: auto;
  overflow-x: hidden;
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: 0;
  z-index: 100;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1),
              padding 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Collapsed state */
.page-guide[data-collapsed="true"] {
  width: var(--guide-collapsed-width);
  overflow: hidden;
}

/* Header container with horizontal tabs and collapse button */
.page-guide__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
  padding: var(--space-3) var(--space-4);
  border-bottom: 1px solid var(--color-border);
  position: sticky;
  top: 0;
  z-index: 10;
  background: rgba(247, 250, 252, 0.85);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

/* Dark mode support for blurred header */
html[data-theme='dark'] .page-guide__header {
  background: rgba(30, 41, 59, 0.85);
}

@media (prefers-color-scheme: dark) {
  html:not([data-theme='light']) .page-guide__header {
    background: rgba(30, 41, 59, 0.85);
  }
}

/* Horizontal tabs container */
.page-guide__tabs-horizontal {
  display: flex;
  gap: var(--space-2);
  flex: 1;
}

/* Individual horizontal tab */
.page-guide__tab {
  padding: var(--space-2) var(--space-3);
  background: transparent;
  color: var(--color-text-secondary);
  border: none;
  border-bottom: 2px solid transparent;
  font-size: 0.875rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
  position: relative;
}

.page-guide__tab:hover {
  color: var(--color-text);
  border-bottom-color: var(--color-border);
}

.page-guide__tab.active {
  color: var(--color-primary);
  border-bottom-color: var(--color-primary);
}

.page-guide__tab:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* Collapse button (arrow) */
.page-guide__collapse {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  padding: 0;
  background: transparent;
  color: var(--color-text-secondary);
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
  border-radius: var(--radius-sm);
}

.page-guide__collapse:hover {
  background: var(--color-bg-tertiary);
  color: var(--color-text);
}

.page-guide__collapse:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

.page-guide__collapse-icon {
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  flex-shrink: 0;
  width: 16px;
  height: 16px;
}

/* Collapsed state */
.page-guide[data-collapsed="true"] .page-guide__header {
  padding: var(--space-3);
}

.page-guide[data-collapsed="true"] .page-guide__tabs-horizontal {
  display: none;
}

.page-guide[data-collapsed="true"] .page-guide__collapse-icon {
  transform: rotate(180deg);
}

.page-guide[data-collapsed="true"] .page-guide__panel {
  opacity: 0;
  visibility: hidden;
  height: 0;
  overflow: hidden;
}

/* Panel containers */
.page-guide__panel {
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease;
  padding: var(--space-4) var(--space-5);
}

.page-guide__panel.active {
  display: block;
  opacity: 1;
}

.page-guide__content {
  display: flex;
  flex-direction: column;
  gap: var(--space-5);
  max-width: 340px;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

.page-guide__title {
  font-size: 1.375rem;
  font-weight: 700;
  margin: 0;
  color: var(--color-text);
  line-height: 1.3;
}

.page-guide__intro {
  margin: 0;
  font-size: 1rem;
  line-height: 1.7;
  color: var(--color-muted);
}

.page-guide__section {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  margin-bottom: var(--space-6);
}

.page-guide__section-title {
  font-size: 1.0625rem;
  font-weight: 600;
  margin: 0;
  color: var(--color-text);
}

.page-guide__step-heading {
  font-size: 1rem;
  font-weight: 600;
  margin: var(--space-5) 0 var(--space-3) 0;
  color: var(--color-primary);
  line-height: 1.4;
  transition: background-color 0.3s ease, padding 0.3s ease;
  border-radius: var(--radius-sm);
}

/* Highlighted state for guide sections */
.page-guide__step-heading--highlighted {
  background-color: color-mix(in srgb, var(--color-primary) 15%, transparent);
  padding: var(--space-2) var(--space-3);
  margin-left: calc(var(--space-3) * -1);
  margin-right: calc(var(--space-3) * -1);
  animation: pulse-highlight 0.6s ease-in-out;
}

@keyframes pulse-highlight {
  0%, 100% {
    background-color: color-mix(in srgb, var(--color-primary) 15%, transparent);
  }
  50% {
    background-color: color-mix(in srgb, var(--color-primary) 25%, transparent);
  }
}

.page-guide__section p {
  margin: var(--space-2) 0 var(--space-4) 0;
  font-size: 1rem;
  line-height: 1.7;
  color: var(--color-text);
}

.page-guide__section p strong {
  font-weight: 600;
  color: var(--color-text);
}

.page-guide__list {
  margin: var(--space-4) 0;
  padding-left: var(--space-6);
  font-size: 1rem;
  line-height: 1.8;
  color: var(--color-text);
}

.page-guide__list li {
  margin-bottom: var(--space-4);
}

.page-guide__list strong {
  color: var(--color-primary);
  font-weight: 600;
}

.page-guide__list--no-bullets {
  list-style: none;
}

.page-guide__list--nested {
  margin: var(--space-2) 0;
  padding-left: var(--space-5);
  list-style: circle;
  font-size: inherit;
}

.page-guide__section code {
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
  font-size: 0.9em;
  padding: 2px 6px;
  background: var(--color-surface-alt);
  border-radius: var(--radius-sm);
  color: var(--color-text);
  border: 1px solid var(--color-border);
}

.page-guide__steps {
  margin: 0;
  padding-left: var(--space-5);
  font-size: 0.9375rem;
  line-height: 1.7;
  color: var(--color-text);
  counter-reset: step-counter;
}

.page-guide__steps li {
  margin-bottom: var(--space-5);
  position: relative;
}

.page-guide__steps li strong {
  display: block;
  color: var(--color-primary);
  font-weight: 600;
  margin-bottom: var(--space-2);
  font-size: 1rem;
}

.page-guide__steps li p {
  margin: 0;
  color: var(--color-muted);
  line-height: 1.7;
}

.page-guide__tip {
  padding: var(--space-4);
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
  border: 1px solid rgba(59, 130, 246, 0.3);
  border-radius: var(--radius-md);
  font-size: 0.9375rem;
  line-height: 1.7;
  color: var(--color-text);
}

.page-guide__tip strong {
  color: var(--color-primary);
  display: block;
  margin-bottom: var(--space-2);
  font-size: 1rem;
}

/* Fix WebKit glitch on freezing page - use sticky instead of fixed */
#screen-permissions-manual-freeze {
  min-height: 100vh !important;
}

#screen-permissions-manual-freeze .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-permissions-manual-freeze .wizard-form {
  flex: 1 !important;
}

/* Option 2: Compact Pill-Style Design (Minimalist Modern) */
#screen-permissions-manual-freeze .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

/* Pill-style buttons */
#screen-permissions-manual-freeze .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-manual-freeze .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-permissions-manual-freeze .wizard-button--primary:hover:not(:disabled) {
  box-shadow:
    0 4px 12px rgba(14, 118, 253, 0.25),
    0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-permissions-manual-freeze .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-permissions-manual-freeze .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-permissions-manual-freeze .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

/* Enhanced form cards */
#screen-permissions-manual-freeze .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.05),
    0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-manual-freeze .form-card:hover {
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.08),
    0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-distribution-perpetual - use sticky instead of fixed */
#screen-distribution-perpetual {
  min-height: 100vh !important;
}

#screen-distribution-perpetual .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-distribution-perpetual .wizard-form {
  flex: 1 !important;
}

/* Option 2: Compact Pill-Style Design (Minimalist Modern) */
#screen-distribution-perpetual .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

/* Pill-style buttons */
#screen-distribution-perpetual .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-distribution-perpetual .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-distribution-perpetual .wizard-button--primary:hover:not(:disabled) {
  box-shadow:
    0 4px 12px rgba(14, 118, 253, 0.25),
    0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-distribution-perpetual .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-distribution-perpetual .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-distribution-perpetual .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

/* Enhanced form cards */
#screen-distribution-perpetual .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.05),
    0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-distribution-perpetual .form-card:hover {
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.08),
    0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-distribution-emission - use sticky instead of fixed */
#screen-distribution-emission {
  min-height: 100vh !important;
}

#screen-distribution-emission .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-distribution-emission .wizard-form {
  flex: 1 !important;
}

/* Option 2: Compact Pill-Style Design (Minimalist Modern) */
#screen-distribution-emission .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

/* Pill-style buttons */
#screen-distribution-emission .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-distribution-emission .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-distribution-emission .wizard-button--primary:hover:not(:disabled) {
  box-shadow:
    0 4px 12px rgba(14, 118, 253, 0.25),
    0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-distribution-emission .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-distribution-emission .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-distribution-emission .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

/* Enhanced form cards */
#screen-distribution-emission .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.05),
    0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-distribution-emission .form-card:hover {
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.08),
    0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-permissions - use sticky instead of fixed */
#screen-permissions {
  min-height: 100vh !important;
}

#screen-permissions .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-permissions .wizard-form {
  flex: 1 !important;
}

#screen-permissions .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-permissions .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-permissions .wizard-button--primary:hover:not(:disabled) {
  box-shadow:
    0 4px 12px rgba(14, 118, 253, 0.25),
    0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-permissions .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-permissions .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-permissions .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-permissions .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.05),
    0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions .form-card:hover {
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.08),
    0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-registration - use sticky instead of fixed */
#screen-registration {
  min-height: 100vh !important;
}

#screen-registration .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-registration .wizard-form {
  flex: 1 !important;
}

#screen-registration .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-registration .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-registration .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-registration .wizard-button--primary:hover:not(:disabled) {
  box-shadow:
    0 4px 12px rgba(14, 118, 253, 0.25),
    0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-registration .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-registration .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-registration .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-registration .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.05),
    0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-registration .form-card:hover {
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.08),
    0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-permissions-manual-mint - use sticky instead of fixed */
#screen-permissions-manual-mint {
  min-height: 100vh !important;
}

#screen-permissions-manual-mint .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-permissions-manual-mint .wizard-form {
  flex: 1 !important;
}

#screen-permissions-manual-mint .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-permissions-manual-mint .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-manual-mint .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-permissions-manual-mint .wizard-button--primary:hover:not(:disabled) {
  box-shadow:
    0 4px 12px rgba(14, 118, 253, 0.25),
    0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-permissions-manual-mint .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-permissions-manual-mint .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-permissions-manual-mint .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-permissions-manual-mint .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.05),
    0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-manual-mint .form-card:hover {
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.08),
    0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-permissions-direct-pricing-change - use sticky instead of fixed */
#screen-permissions-direct-pricing-change {
  min-height: 100vh !important;
}

#screen-permissions-direct-pricing-change .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-permissions-direct-pricing-change .wizard-form {
  flex: 1 !important;
}

#screen-permissions-direct-pricing-change .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-permissions-direct-pricing-change .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-direct-pricing-change .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-permissions-direct-pricing-change .wizard-button--primary:hover:not(:disabled) {
  box-shadow:
    0 4px 12px rgba(14, 118, 253, 0.25),
    0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-permissions-direct-pricing-change .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow:
    0 1px 3px rgba(14, 118, 253, 0.3),
    0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-permissions-direct-pricing-change .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-permissions-direct-pricing-change .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-permissions-direct-pricing-change .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.05),
    0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-direct-pricing-change .form-card:hover {
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.08),
    0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-permissions-manual-burn */
#screen-permissions-manual-burn {
  min-height: 100vh !important;
}

#screen-permissions-manual-burn .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-permissions-manual-burn .wizard-form {
  flex: 1 !important;
}

#screen-permissions-manual-burn .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-permissions-manual-burn .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-manual-burn .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-permissions-manual-burn .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-permissions-manual-burn .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-permissions-manual-burn .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-permissions-manual-burn .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-permissions-manual-burn .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-manual-burn .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-permissions-emergency */
#screen-permissions-emergency {
  min-height: 100vh !important;
}

#screen-permissions-emergency .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-permissions-emergency .wizard-form {
  flex: 1 !important;
}

#screen-permissions-emergency .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-permissions-emergency .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-emergency .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-permissions-emergency .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-permissions-emergency .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-permissions-emergency .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-permissions-emergency .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-permissions-emergency .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-emergency .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-permissions-conventions-change */
#screen-permissions-conventions-change {
  min-height: 100vh !important;
}

#screen-permissions-conventions-change .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-permissions-conventions-change .wizard-form {
  flex: 1 !important;
}

#screen-permissions-conventions-change .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-permissions-conventions-change .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-conventions-change .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-permissions-conventions-change .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-permissions-conventions-change .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-permissions-conventions-change .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-permissions-conventions-change .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-permissions-conventions-change .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-conventions-change .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-permissions-marketplace-trade-mode-change */
#screen-permissions-marketplace-trade-mode-change {
  min-height: 100vh !important;
}

#screen-permissions-marketplace-trade-mode-change .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-permissions-marketplace-trade-mode-change .wizard-form {
  flex: 1 !important;
}

#screen-permissions-marketplace-trade-mode-change .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-permissions-marketplace-trade-mode-change .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-marketplace-trade-mode-change .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-permissions-marketplace-trade-mode-change .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-permissions-marketplace-trade-mode-change .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-permissions-marketplace-trade-mode-change .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-permissions-marketplace-trade-mode-change .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-permissions-marketplace-trade-mode-change .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-marketplace-trade-mode-change .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-permissions-main-control-change */
#screen-permissions-main-control-change {
  min-height: 100vh !important;
}

#screen-permissions-main-control-change .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-permissions-main-control-change .wizard-form {
  flex: 1 !important;
}

#screen-permissions-main-control-change .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-permissions-main-control-change .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-main-control-change .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-permissions-main-control-change .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-permissions-main-control-change .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-permissions-main-control-change .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-permissions-main-control-change .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-permissions-main-control-change .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-main-control-change .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-advanced-launch */
#screen-advanced-launch {
  min-height: 100vh !important;
}

#screen-advanced-launch .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-advanced-launch .wizard-form {
  flex: 1 !important;
}

#screen-advanced-launch .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-advanced-launch .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-advanced-launch .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-advanced-launch .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-advanced-launch .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-advanced-launch .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-advanced-launch .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-advanced-launch .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-advanced-launch .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-distribution-preprogrammed */
#screen-distribution-preprogrammed {
  min-height: 100vh !important;
}

#screen-distribution-preprogrammed .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-distribution-preprogrammed .wizard-form {
  flex: 1 !important;
}

#screen-distribution-preprogrammed .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-distribution-preprogrammed .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-distribution-preprogrammed .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-distribution-preprogrammed .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-distribution-preprogrammed .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-distribution-preprogrammed .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-distribution-preprogrammed .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-distribution-preprogrammed .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-distribution-preprogrammed .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-advanced-history */
#screen-advanced-history {
  min-height: 100vh !important;
}

#screen-advanced-history .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-advanced-history .wizard-form {
  flex: 1 !important;
}

#screen-advanced-history .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-advanced-history .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-advanced-history .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-advanced-history .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-advanced-history .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-advanced-history .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-advanced-history .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-advanced-history .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-advanced-history .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-advanced */
#screen-advanced {
  min-height: 100vh !important;
}

#screen-advanced .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-advanced .wizard-form {
  flex: 1 !important;
}

#screen-advanced .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-advanced .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-advanced .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-advanced .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-advanced .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-advanced .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-advanced .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-advanced .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-advanced .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-distribution */
#screen-distribution {
  min-height: 100vh !important;
}

#screen-distribution .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-distribution .wizard-form {
  flex: 1 !important;
}

#screen-distribution .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-distribution .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-distribution .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-distribution .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-distribution .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-distribution .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-distribution .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-distribution .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-distribution .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-review */
#screen-review {
  min-height: 100vh !important;
}

#screen-review .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-review .wizard-form {
  flex: 1 !important;
}

#screen-review .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-review .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-review .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-review .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-review .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-review .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-review .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-review .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-review .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-naming-update */
#screen-naming-update {
  min-height: 100vh !important;
}

#screen-naming-update .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-naming-update .wizard-form {
  flex: 1 !important;
}

#screen-naming-update .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-naming-update .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-naming-update .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-naming-update .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-naming-update .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-naming-update .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-naming-update .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-naming-update .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-naming-update .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-naming */
#screen-naming {
  min-height: 100vh !important;
}

#screen-naming .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-naming .wizard-form {
  flex: 1 !important;
}

#screen-naming .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-naming .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-naming .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-naming .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-naming .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-naming .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-naming .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-naming .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-naming .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-naming-localization */
#screen-naming-localization {
  min-height: 100vh !important;
}

#screen-naming-localization .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-naming-localization .wizard-form {
  flex: 1 !important;
}

#screen-naming-localization .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-naming-localization .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-naming-localization .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-naming-localization .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-naming-localization .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-naming-localization .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-naming-localization .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-naming-localization .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-naming-localization .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-permissions-transfer */
#screen-permissions-transfer {
  min-height: 100vh !important;
}

#screen-permissions-transfer .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-permissions-transfer .wizard-form {
  flex: 1 !important;
}

#screen-permissions-transfer .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-permissions-transfer .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-transfer .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-permissions-transfer .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-permissions-transfer .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-permissions-transfer .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-permissions-transfer .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-permissions-transfer .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-permissions-transfer .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Fix WebKit glitch on screen-search */
#screen-search {
  min-height: 100vh !important;
}

#screen-search .wizard-screen__inner {
  min-height: 100vh !important;
  display: flex !important;
  flex-direction: column !important;
}

#screen-search .wizard-form {
  flex: 1 !important;
}

#screen-search .wizard-actions--sticky {
  position: sticky !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-top: auto !important;
  padding: var(--space-3) var(--space-md) !important;
  background: var(--color-surface) !important;
  border-top: 2px solid var(--color-border) !important;
  box-shadow: 0 -4px 24px rgba(0, 0, 0, 0.06) !important;
}

#screen-search .wizard-button {
  border-radius: var(--radius-full);
  padding: 10px 28px;
  min-height: 42px;
  font-size: 0.9375rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-search .wizard-button--primary {
  background: var(--color-primary);
  border: none;
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 0 rgba(14, 118, 253, 0.4);
}

#screen-search .wizard-button--primary:hover:not(:disabled) {
  box-shadow: 0 4px 12px rgba(14, 118, 253, 0.25), 0 0 0 4px rgba(14, 118, 253, 0.1);
  transform: scale(1.02);
}

#screen-search .wizard-button--primary:active:not(:disabled) {
  transform: scale(0.98);
  box-shadow: 0 1px 3px rgba(14, 118, 253, 0.3), 0 0 0 3px rgba(14, 118, 253, 0.15);
}

#screen-search .wizard-button--secondary {
  background: transparent;
  border: 2px solid var(--color-border-strong);
  color: var(--color-text);
}

#screen-search .wizard-button--secondary:hover:not(:disabled) {
  border-color: var(--color-primary);
  background: var(--color-primary-light);
  color: var(--color-primary);
  transform: scale(1.02);
}

#screen-search .form-card {
  border: 1px solid var(--color-border);
  border-radius: var(--radius-xl);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.02);
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

#screen-search .form-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(14, 118, 253, 0.08);
  border-color: rgba(14, 118, 253, 0.2);
}

/* Hide guide on smaller screens */
@media (max-width: 1200px) {
  .page-guide {
    display: none;
  }

  .wizard-actions--sticky {
    right: 0 !important;
  }
}

/* Help Icon Button */
.help-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  margin-left: 6px;
  padding: 0;
  border: none;
  background: none;
  color: var(--color-primary);
  cursor: help;
  transition: all 0.2s ease;
  vertical-align: middle;
  position: relative;
  opacity: 0.7;
}

.help-icon:hover {
  opacity: 1;
  transform: scale(1.15);
}

.help-icon:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  border-radius: 50%;
  opacity: 1;
}

.help-icon svg {
  width: 20px;
  height: 20px;
  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));
}

/* Help Tooltip - Appears on RIGHT side */
.help-tooltip {
  position: fixed;
  z-index: 10000;
  right: 30px;
  width: 360px;
  max-width: 360px;
  padding: var(--space-5);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1);
  font-size: var(--font-size-sm);
  line-height: 1.6;
  color: var(--color-text);
  animation: slideInRight 0.2s ease-out;
}

/* On smaller screens, adjust tooltip */
@media (max-width: 1400px) {
  .help-tooltip {
    width: var(--guide-width);
    max-width: calc(100vw - 40px);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.help-tooltip[hidden] {
  display: none;
}

/* Arrow pointing LEFT (from tooltip to icon) */
.help-tooltip::before {
  content: '';
  position: absolute;
  left: -6px;
  top: 20px;
  width: 12px;
  height: 12px;
  background: var(--color-bg-primary);
  border-left: 1px solid var(--color-border);
  border-bottom: 1px solid var(--color-border);
  transform: rotate(45deg);
}

.help-tooltip p {
  margin: 0 0 var(--space-2) 0;
}

.help-tooltip p:last-child {
  margin-bottom: 0;
}

.help-tooltip strong {
  color: var(--color-text);
  font-weight: 600;
}

.help-tooltip code {
  padding: 2px 6px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius-sm);
  font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
  font-size: 0.9em;
}

.help-tooltip-permanent {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin-top: var(--space-2);
  padding: var(--space-2);
  background: color-mix(in srgb, var(--color-warning) 10%, transparent);
  border-left: 3px solid var(--color-warning);
  border-radius: var(--radius-sm);
  font-size: 0.9em;
}

.help-tooltip-permanent::before {
  content: '🔒';
  font-size: 1.2em;
}

.help-tooltip-example {
  margin-top: var(--space-2);
  padding: var(--space-2);
  background: var(--color-bg-secondary);
  border-radius: var(--radius-sm);
  border-left: 3px solid var(--color-primary);
}

.help-tooltip-example strong {
  display: block;
  margin-bottom: var(--space-1);
  color: var(--color-primary);
  font-size: 0.9em;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* Label with help icon */
label.with-help {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

/* Responsive adjustments */
@media (max-width: 900px) {
  .help-tooltip {
    width: 340px;
  }
}

@media (max-width: 600px) {
  .help-tooltip {
    position: fixed;
    left: 10px;
    right: 10px;
    width: auto;
    max-width: none;
  }

  .help-tooltip::before {
    display: none; /* Hide arrow on mobile */
  }
}

/* ═══════════════════════════════════════════════════════
   REVIEW SCREEN COMPONENTS
   ═══════════════════════════════════════════════════════ */

/* Review Grid Layout */
.review-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: var(--space-5);
  margin-bottom: var(--space-8);
}

/* Review Card */
.review-card {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  padding: var(--space-5);
  transition: box-shadow 0.2s ease;
}

.review-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.review-card__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);
  padding-bottom: var(--space-3);
  border-bottom: 2px solid var(--color-border);
}

.review-card__title {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.review-card__badge {
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-sm);
  letter-spacing: 0.5px;
}

.review-card__badge--permanent {
  background: rgba(239, 68, 68, 0.1);
  color: #dc2626;
  border: 1px solid rgba(239, 68, 68, 0.3);
}

.review-card__list {
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.review-card__item {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: var(--space-3);
}

.review-card__item dt {
  font-size: 0.9375rem;
  color: var(--color-muted);
  font-weight: 500;
}

.review-card__item dd {
  font-size: 1rem;
  color: var(--color-text);
  font-weight: 600;
  margin: 0;
  text-align: right;
}

/* Review Annotations */
.review-annotation {
  margin-top: var(--space-4);
  padding: var(--space-3);
  border-radius: var(--radius-md);
  font-size: 0.875rem;
  line-height: 1.6;
}

.review-annotation--warning {
  background: rgba(245, 158, 11, 0.1);
  border-left: 3px solid #f59e0b;
  color: #92400e;
}

.review-annotation strong {
  font-weight: 600;
}

/* Distribution Preview */
.distribution-preview {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.distribution-preview__item {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  padding: var(--space-2) 0;
  border-bottom: 1px solid var(--color-border);
}

.distribution-preview__item:last-child {
  border-bottom: none;
}

.distribution-preview__label {
  font-size: 0.9375rem;
  color: var(--color-muted);
  font-weight: 500;
}

.distribution-preview__value {
  font-size: 1rem;
  color: var(--color-text);
  font-weight: 600;
  text-align: right;
}

/* Simulation Box */
.simulation-box {
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(139, 92, 246, 0.08));
  border: 1px solid rgba(59, 130, 246, 0.2);
  border-radius: var(--radius-lg);
  padding: var(--space-6);
  margin-bottom: var(--space-8);
}

.simulation-box__title {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 var(--space-4) 0;
}

.simulation-box__list {
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.simulation-item {
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
}

.simulation-item__icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.simulation-item__text {
  font-size: 1rem;
  line-height: 1.6;
  color: var(--color-text);
  padding-top: 0.25rem;
}

/* JSON Preview */
.json-preview {
  background: var(--color-bg-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  margin-bottom: var(--space-8);
  overflow: hidden;
}

.json-preview__summary {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-4);
  cursor: pointer;
  user-select: none;
  font-weight: 600;
  color: var(--color-text);
  transition: background 0.2s ease;
}

.json-preview__summary:hover {
  background: var(--color-surface-alt);
}

.json-preview__icon {
  font-family: 'Courier New', monospace;
  font-size: 1.25rem;
  color: var(--color-primary);
}

.json-preview__chevron {
  margin-left: auto;
  transition: transform 0.3s ease;
}

.json-preview[open] .json-preview__chevron {
  transform: rotate(180deg);
}

.json-preview__content {
  padding: 0 var(--space-4) var(--space-4);
}

.json-preview__toolbar {
  display: flex;
  justify-content: flex-end;
  margin-bottom: var(--space-3);
}

.json-preview__copy {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  color: var(--color-text);
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.json-preview__copy:hover {
  background: var(--color-primary);
  color: white;
  border-color: var(--color-primary);
}

.json-preview__copy svg {
  width: 16px;
  height: 16px;
}

.json-preview__code {
  background: var(--color-surface-alt);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--space-4);
  font-family: 'Courier New', Monaco, monospace;
  font-size: 0.875rem;
  line-height: 1.6;
  color: var(--color-text);
  overflow-x: auto;
  margin: 0 0 var(--space-4) 0;
  white-space: pre;
}

.json-annotations {
  background: var(--color-surface-alt);
  border-radius: var(--radius-md);
  padding: var(--space-4);
}

.json-annotations__title {
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 var(--space-3) 0;
}

.json-annotations__list {
  margin: 0;
  padding-left: var(--space-5);
  list-style: disc;
}

.json-annotations__list li {
  font-size: 0.9375rem;
  line-height: 1.7;
  color: var(--color-text);
  margin-bottom: var(--space-2);
}

.json-annotations__list code {
  font-family: 'Courier New', Monaco, monospace;
  background: rgba(59, 130, 246, 0.1);
  padding: 0.125rem 0.375rem;
  border-radius: var(--radius-sm);
  font-size: 0.875rem;
  color: var(--color-primary);
}

/* Responsive Design for Review Components */
@media (max-width: 768px) {
  .review-grid {
    grid-template-columns: 1fr;
  }

  .simulation-box {
    padding: var(--space-4);
  }

  .json-preview__summary {
    padding: var(--space-3);
  }

  .json-preview__content {
    padding: 0 var(--space-3) var(--space-3);
  }
}

/* ===================================================================
   Contract Preview Modal
   =================================================================== */

.contract-preview-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-4);
}

.contract-preview-modal[hidden] {
  display: none;
}

.contract-preview-modal__overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(4px);
  animation: fadeIn 0.2s ease-out;
}

.contract-preview-modal__content {
  position: relative;
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  max-width: 900px;
  width: 100%;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  animation: slideUp 0.3s ease-out;
}

.contract-preview-modal__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-5);
  border-bottom: 1px solid var(--color-border);
}

.contract-preview-modal__title {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--color-text);
  margin: 0;
}

.contract-preview-modal__close {
  background: none;
  border: none;
  font-size: 2rem;
  line-height: 1;
  color: var(--color-text-secondary);
  cursor: pointer;
  padding: 0;
  width: 2rem;
  height: 2rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-sm);
  transition: all 0.2s ease;
}

.contract-preview-modal__close:hover {
  background: var(--color-surface-alt);
  color: var(--color-text);
}

.contract-preview-modal__body {
  padding: var(--space-5);
  overflow-y: auto;
  flex: 1;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Dark mode support */
html[data-theme='dark'] .contract-preview-modal__overlay {
  background: rgba(0, 0, 0, 0.85);
}

/* Validation Icons */
.wizard-field__input.is-valid {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="%2310b981"><path d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"/></svg>');
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 20px 20px;
  padding-right: 40px;
}

.wizard-field__input.is-invalid {
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="%23ef4444"><path d="M5.28 4.22a.75.75 0 00-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 101.06 1.06L8 9.06l2.72 2.72a.75.75 0 101.06-1.06L9.06 8l2.72-2.72a.75.75 0 00-1.06-1.06L8 6.94 5.28 4.22z"/></svg>');
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 20px 20px;
  padding-right: 40px;
}

/* Loading Spinner */
.spinner {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 2px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

.spinner--small {
  width: 16px;
  height: 16px;
  border-width: 2px;
}

.spinner--medium {
  width: 24px;
  height: 24px;
  border-width: 3px;
}

.spinner--large {
  width: 40px;
  height: 40px;
  border-width: 4px;
}

.spinner--white {
  border-color: rgba(255, 255, 255, 0.3);
  border-top-color: white;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: reduce) {
  .spinner {
    animation: none;
  }
  .spinner::after {
    content: '⏳';
    display: block;
    font-size: inherit;
  }
}

/* Loading Button States */
.wizard-button--loading,
.wizard-button[aria-busy="true"] {
  position: relative;
  color: transparent !important;
  pointer-events: none;
  cursor: wait;
}

.wizard-button--loading::after,
.wizard-button[aria-busy="true"]::after {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 20px;
  height: 20px;
  border: 2px solid currentColor;
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

.wizard-button--loading.wizard-button--primary::after,
.wizard-button[aria-busy="true"].wizard-button--primary::after {
  border-color: rgba(255, 255, 255, 0.3);
  border-top-color: white;
}

.wizard-button--loading.wizard-button--small::after,
.wizard-button[aria-busy="true"].wizard-button--small::after {
  width: 16px;
  height: 16px;
  border-width: 2px;
}

/* Loading Overlay */
.loading-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  display: none;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.2s ease;
}

.loading-overlay[aria-hidden="false"] {
  display: flex;
}

.loading-overlay__content {
  background: var(--color-surface);
  border-radius: var(--radius-lg);
  padding: var(--space-6);
  box-shadow: var(--shadow-lg);
  text-align: center;
  min-width: 200px;
  animation: scaleIn 0.3s cubic-bezier(0.2, 0.6, 0.2, 1);
}

.loading-overlay__spinner {
  margin: 0 auto var(--space-4);
}

.loading-overlay__message {
  font-size: var(--text-base);
  font-weight: 500;
  color: var(--color-text);
  margin: 0;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes scaleIn {
  from { transform: scale(0.9); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

/* ========================================
   Toast Notification System
   ======================================== */

/* Toast Container - Fixed position at top-right */
.toast-container {
  position: fixed;
  top: var(--space-6);
  right: var(--space-6);
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  max-width: 420px;
  pointer-events: none;
}

@media (max-width: 600px) {
  .toast-container {
    top: var(--space-4);
    right: var(--space-4);
    left: var(--space-4);
    max-width: none;
  }
}

/* Individual Toast */
.toast {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.08),
    0 2px 4px rgba(0, 0, 0, 0.04);
  padding: var(--space-4);
  display: flex;
  align-items: flex-start;
  gap: var(--space-3);
  min-width: 320px;
  max-width: 420px;
  pointer-events: all;
  transform: translateX(calc(100% + var(--space-6)));
  opacity: 0;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

html[data-theme='dark'] .toast {
  background: var(--color-surface);
  border-color: rgba(255, 255, 255, 0.1);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.3),
    0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Toast slide-in animation */
.toast.toast--show {
  transform: translateX(0);
  opacity: 1;
}

/* Toast slide-out animation */
.toast.toast--hide {
  transform: translateX(calc(100% + var(--space-6)));
  opacity: 0;
}

@media (max-width: 600px) {
  .toast {
    min-width: auto;
    max-width: none;
  }
}

/* Toast Icon */
.toast__icon {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.toast__icon svg {
  width: 100%;
  height: 100%;
}

/* Toast Content */
.toast__content {
  flex: 1;
  min-width: 0;
}

.toast__title {
  font-size: var(--text-sm);
  font-weight: 600;
  color: var(--color-text);
  margin: 0 0 var(--space-1) 0;
  line-height: 1.4;
}

.toast__message {
  font-size: var(--text-sm);
  color: var(--color-muted);
  margin: 0;
  line-height: 1.5;
}

/* Toast Close Button */
.toast__close {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  color: var(--color-silver);
  transition: color 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.toast__close:hover {
  color: var(--color-text);
}

.toast__close svg {
  width: 16px;
  height: 16px;
}

/* Toast Variants */

/* Success Toast */
.toast--success {
  border-left: 4px solid var(--color-success);
}

.toast--success .toast__icon {
  color: var(--color-success);
}

.toast--success .toast__title {
  color: var(--color-success);
}

/* Error Toast */
.toast--error {
  border-left: 4px solid var(--color-error);
}

.toast--error .toast__icon {
  color: var(--color-error);
}

.toast--error .toast__title {
  color: var(--color-error);
}

/* Warning Toast */
.toast--warning {
  border-left: 4px solid var(--color-warning);
}

.toast--warning .toast__icon {
  color: var(--color-warning);
}

.toast--warning .toast__title {
  color: var(--color-warning);
}

/* Info Toast */
.toast--info {
  border-left: 4px solid var(--color-info);
}

.toast--info .toast__icon {
  color: var(--color-info);
}

.toast--info .toast__title {
  color: var(--color-info);
}

/* Toast Progress Bar (optional auto-dismiss indicator) */
.toast__progress {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--color-border);
  border-radius: 0 0 var(--radius-lg) var(--radius-lg);
  overflow: hidden;
}

.toast__progress-bar {
  height: 100%;
  background: currentColor;
  transform-origin: left;
  animation: toast-progress linear forwards;
}

@keyframes toast-progress {
  from { transform: scaleX(1); }
  to { transform: scaleX(0); }
}

/* ========================================
   Enhanced Accessibility (WCAG 2.1 AA)
   ======================================== */

/* Screen Reader Only Text */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Enhanced Focus States for All Interactive Elements */
button:focus-visible,
a:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible,
[tabindex]:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  border-radius: var(--radius-sm);
}

/* Remove default focus outline (we're using :focus-visible) */
button:focus:not(:focus-visible),
a:focus:not(:focus-visible),
input:focus:not(:focus-visible),
textarea:focus:not(:focus-visible),
select:focus:not(:focus-visible) {
  outline: none;
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  :root {
    --focus-ring-width: 4px;
    --color-border: #000000;
  }

  html[data-theme='dark'] {
    --color-border: #ffffff;
  }

  button,
  input,
  select,
  textarea {
    border-width: 2px;
  }
}

/* Enhanced Focus for Buttons */
.btn:focus-visible,
.wizard-nav-item:focus-visible,
.wizard-tab:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  box-shadow: 0 0 0 4px rgba(14, 118, 253, 0.1);
}

/* Keyboard Navigation Indicators */
body.using-keyboard *:focus {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

/* Ensure sufficient color contrast for text */
.text-muted,
.wizard-nav-item__text,
.page-guide__intro {
  color: var(--color-muted);
  /* Ensures 4.5:1 contrast ratio */
}

html[data-theme='dark'] .text-muted,
html[data-theme='dark'] .wizard-nav-item__text {
  color: #CBD5E1; /* Lighter for better contrast in dark mode */
}

/* Touch Target Size - Minimum 44x44px */
.btn,
.wizard-nav-item,
.wizard-tab,
.toast__close {
  min-height: 44px;
  min-width: 44px;
}

/* Checkbox and Radio Button Sizing - Smaller for better UI proportions */
input[type="checkbox"],
input[type="radio"] {
  width: 20px;
  height: 20px;
  min-width: 20px;
  min-height: 20px;
  cursor: pointer;
  flex-shrink: 0;
  margin: 0;
}

/* Exception for compact elements that need smaller touch targets */
.wizard-progress-compact__dot,
.page-guide__collapse {
  min-height: 28px;
  min-width: 28px;
}

/* Ensure links are distinguishable */
a:not(.btn):not(.wizard-nav-item) {
  text-decoration: underline;
  text-underline-offset: 2px;
}

a:not(.btn):not(.wizard-nav-item):hover {
  text-decoration-thickness: 2px;
}

/* Form Input Accessibility */
input:invalid:not(:placeholder-shown),
textarea:invalid:not(:placeholder-shown),
select:invalid {
  border-color: var(--color-error);
  background-color: var(--color-error-light);
}

input:valid:not(:placeholder-shown),
textarea:valid:not(:placeholder-shown),
select:valid {
  border-color: var(--color-success);
}

/* Error Messages */
.error-message,
[role="alert"].error {
  color: var(--color-error);
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.error-message::before {
  content: '⚠';
  font-size: 1.2em;
}

/* Skip to Main Content Link Enhancement */
.skip-link:focus {
  top: var(--space-4);
  z-index: 10000;
}

/* Reduced Motion Preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Keyboard-only Focus Indicators (No mouse focus rings) */
:focus:not(:focus-visible) {
  outline: none;
}

/* Ensure disabled elements are clearly indicated */
button:disabled,
input:disabled,
select:disabled,
textarea:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  background-color: var(--color-smoke);
}

html[data-theme='dark'] button:disabled,
html[data-theme='dark'] input:disabled,
html[data-theme='dark'] select:disabled,
html[data-theme='dark'] textarea:disabled {
  background-color: rgba(255, 255, 255, 0.05);
}

/* ARIA Live Region Styling */
[aria-live="polite"],
[aria-live="assertive"] {
  position: relative;
}

/* ========================================
   Mobile Hamburger Menu
   ======================================== */

/* Hamburger Button - Hidden on desktop */
.mobile-menu-toggle {
  display: none;
  background: none;
  border: none;
  padding: var(--space-2);
  cursor: pointer;
  flex-direction: column;
  gap: 5px;
  width: 40px;
  height: 40px;
  justify-content: center;
  align-items: center;
  border-radius: var(--radius-sm);
  transition: background-color 0.2s ease;
}

.mobile-menu-toggle:hover {
  background-color: var(--sidebar-hover);
}

.mobile-menu-toggle:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
}

/* Hamburger Bars */
.mobile-menu-toggle__bar {
  display: block;
  width: 24px;
  height: 2px;
  background-color: var(--sidebar-text);
  border-radius: 2px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Animate to X when menu is open */
.wizard-sidebar.mobile-menu-open .mobile-menu-toggle__bar:nth-child(1) {
  transform: translateY(7px) rotate(45deg);
}

.wizard-sidebar.mobile-menu-open .mobile-menu-toggle__bar:nth-child(2) {
  opacity: 0;
  transform: scaleX(0);
}

.wizard-sidebar.mobile-menu-open .mobile-menu-toggle__bar:nth-child(3) {
  transform: translateY(-7px) rotate(-45deg);
}

/* Mobile Responsive Behavior */
@media (max-width: 900px) {
  /* Show hamburger button */
  .mobile-menu-toggle {
    display: flex;
  }

  /* Update sidebar header layout for mobile */
  .wizard-sidebar__header {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4);
  }

  /* Hide sidebar by default on mobile */
  .wizard-sidebar {
    position: fixed;
    left: -280px;
    top: 0;
    bottom: 0;
    width: 280px;
    z-index: 1000;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
  }

  /* Show sidebar when menu is open */
  .wizard-sidebar.mobile-menu-open {
    transform: translateX(280px);
  }

  /* Mobile overlay */
  .mobile-menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }

  .mobile-menu-overlay.active {
    opacity: 1;
    pointer-events: all;
  }

  /* Adjust main content on mobile */
  .wizard-main {
    margin-left: 0;
  }
}

/* Skeleton Loading Screens */
.skeleton {
  background: linear-gradient(
    90deg,
    var(--color-smoke) 25%,
    var(--color-snow) 50%,
    var(--color-smoke) 75%
  );
  background-size: 200% 100%;
  border-radius: var(--radius-sm);
  animation: skeleton-pulse 1.5s ease-in-out infinite;
}

html[data-theme='dark'] .skeleton {
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.05) 25%,
    rgba(255, 255, 255, 0.1) 50%,
    rgba(255, 255, 255, 0.05) 75%
  );
  background-size: 200% 100%;
}

.skeleton--text {
  height: 1em;
  margin-bottom: var(--space-2);
}

.skeleton--heading {
  height: 1.5em;
  width: 60%;
  margin-bottom: var(--space-4);
}

.skeleton--button {
  height: 44px;
  width: 120px;
  border-radius: var(--radius-md);
}

.skeleton--card {
  height: 200px;
  border-radius: var(--radius-lg);
}

@keyframes skeleton-pulse {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

@media (prefers-reduced-motion: reduce) {
  .skeleton {
    animation: none;
    background: var(--color-smoke);
  }

  html[data-theme='dark'] .skeleton {
    background: rgba(255, 255, 255, 0.05);
  }
}

/* Dark mode loading overlay */
html[data-theme='dark'] .loading-overlay {
  background: rgba(0, 0, 0, 0.7);
}

/* Touch Target Improvements for Mobile */
@media (max-width: 600px) {
  .wizard-checkbox__input,
  .wizard-choice__input {
    min-width: 44px;
    min-height: 44px;
  }

  .wizard-button--small,
  .theme-toggle-option {
    min-height: 44px;
    padding: var(--space-3) var(--space-4);
  }

  /* Standardize Input Heights on Mobile */
  .wizard-field__input {
    min-height: 52px;
  }

  /* Fix Horizontal Scrolling for Tabs */
  .wizard-tabs {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }

  .wizard-tabs::-webkit-scrollbar {
    display: none;
  }
}

/* ========================================
   ENHANCED VISUAL HIERARCHY & SPACING
   ======================================== */

/* Typography Hierarchy Improvements */
.wizard-screen__title {
  font-weight: 700;
  letter-spacing: -0.02em;
  color: var(--color-ink);
  margin-bottom: var(--space-4);
}

.wizard-screen__subtitle {
  font-size: var(--text-lg);
  line-height: 1.6;
  font-weight: 400;
  letter-spacing: -0.01em;
}

.form-card__title {
  letter-spacing: -0.01em;
  line-height: 1.3;
}

.form-card__description {
  line-height: 1.6;
}

/* Section Spacing - Clear Visual Separation */
.wizard-screen {
  padding: clamp(var(--space-6), 3vw, var(--space-12));
}

.wizard-form {
  gap: clamp(var(--space-6), 3vw, var(--space-12));
}

.form-card + .form-card {
  margin-top: var(--space-6);
}

/* Improved Card Hierarchy */
.form-card {
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.04),
    0 1px 2px rgba(0, 0, 0, 0.02);
  transition:
    box-shadow var(--transition-base),
    border-color var(--transition-base);
  /* Removed transform transition to prevent position:fixed button glitches */
}

.form-card:hover {
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.06),
    0 2px 4px rgba(0, 0, 0, 0.03);
  /* Removed transform: translateY(-1px) - it breaks position:fixed buttons */
}

.form-card:focus-within {
  border-color: var(--color-primary);
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.06),
    0 2px 4px rgba(0, 0, 0, 0.03),
    0 0 0 3px rgba(14, 118, 253, 0.1);
}

/* Enhanced Header Spacing */
.form-card__header {
  padding-bottom: var(--space-4);
  margin-bottom: var(--space-4);
}

.form-card__header + .form-card__body {
  padding-top: 0;
}

/* Field Group Spacing */
.field-group {
  margin-bottom: var(--space-5);
}

.field-group:last-child {
  margin-bottom: 0;
}

.wizard-field + .wizard-field {
  margin-top: var(--space-4);
}

/* Label Hierarchy */
.wizard-field__label,
.field-group__label {
  font-weight: 600;
  font-size: var(--text-sm);
  color: var(--color-ink);
  margin-bottom: var(--space-2);
  display: block;
  letter-spacing: -0.01em;
}

.wizard-field__hint,
.field-group__hint {
  font-size: var(--text-xs);
  color: var(--color-silver);
  margin-top: var(--space-2);
  line-height: 1.5;
}

/* Input Spacing and Hierarchy */
input[type="text"],
input[type="number"],
input[type="email"],
textarea,
select {
  margin-top: var(--space-1);
}

/* Section Dividers */
.wizard-divider {
  height: 1px;
  background: linear-gradient(
    to right,
    transparent,
    var(--color-border) 20%,
    var(--color-border) 80%,
    transparent
  );
  border: none;
  margin: var(--space-8) 0;
}

/* Content Width and Breathing Room */
.wizard-screen__content {
  max-width: var(--content-max-width);
  margin: 0 auto;
  padding: 0 var(--space-4);
}

/* Action Button Spacing */
.wizard-actions {
  margin-top: clamp(var(--space-8), 4vw, var(--space-12));
  padding-top: var(--space-6);
  border-top: 1px solid var(--color-border);
  gap: var(--space-3);
}

/* Consistent Vertical Rhythm */
p + p {
  margin-top: var(--space-4);
}

h1 + p,
h2 + p,
h3 + p {
  margin-top: var(--space-3);
}

/* Info Panel Spacing */
.wizard-info-panel {
  margin-top: var(--space-3);
  margin-bottom: var(--space-4);
  padding: var(--space-4);
  line-height: 1.6;
}

/* List Spacing */
ul,
ol {
  padding-left: var(--space-5);
  margin: var(--space-3) 0;
}

li + li {
  margin-top: var(--space-2);
}

/* Checkbox and Radio Spacing */
.checkbox-group,
.radio-group {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

/* Enhanced Grid Spacing */
.form-card-grid {
  gap: var(--space-5);
}

/* Tab Panel Spacing */
.wizard-tab-panel {
  padding: var(--space-5);
}

/* Localization Row Spacing */
.localization-row + .localization-row {
  margin-top: var(--space-4);
  padding-top: var(--space-4);
  border-top: 1px solid var(--color-border);
}

/* Template Card Spacing */
.template-card {
  padding: var(--space-5);
  margin-bottom: var(--space-4);
}

/* Improved Button Group Spacing */
.button-group {
  display: flex;
  gap: var(--space-3);
  align-items: center;
}

.button-group--vertical {
  flex-direction: column;
  align-items: stretch;
}

/* Badge and Chip Spacing */
.wizard-badge,
.wizard-chip {
  margin: 0 var(--space-1);
}

/* Code Block Spacing */
pre,
.wizard-json__code {
  margin: var(--space-4) 0;
  padding: var(--space-4);
}

/* Table Spacing (if used) */
table {
  border-spacing: 0;
  margin: var(--space-4) 0;
}

th,
td {
  padding: var(--space-3) var(--space-4);
}

/* Empty State Spacing */
.empty-state {
  padding: var(--space-12) var(--space-6);
  text-align: center;
}

/* Alert and Notice Spacing */
.alert,
.notice {
  margin: var(--space-4) 0;
  padding: var(--space-4);
  border-radius: var(--radius-md);
}

/* Responsive Spacing Adjustments */
@media (max-width: 900px) {
  .wizard-screen {
    padding: var(--space-4);
  }

  .wizard-form {
    gap: var(--space-5);
  }

  .wizard-actions {
    margin-top: var(--space-6);
    padding-top: var(--space-4);
  }

  .form-card {
    padding: var(--space-4);
  }

  .form-card__header {
    padding-bottom: var(--space-3);
    margin-bottom: var(--space-3);
  }
}

@media (max-width: 600px) {
  .wizard-screen {
    padding: var(--space-3);
  }

  .wizard-form {
    gap: var(--space-4);
  }

  .form-card + .form-card {
    margin-top: var(--space-4);
  }

  .wizard-actions {
    margin-top: var(--space-5);
    flex-direction: column;
  }

  .wizard-actions .btn {
    width: 100%;
  }
}

/* High Contrast Spacing Enhancement */
@media (prefers-contrast: high) {
  .form-card {
    border-width: 2px;
  }

  .form-card__header {
    border-bottom-width: 2px;
  }

  .wizard-divider {
    background: var(--color-border-strong);
    height: 2px;
  }
}

/* ========================================
   CONSOLIDATED BUTTON SYSTEM
   ======================================== */

/* Base Button Styles - Applied to all buttons */
.btn,
.wizard-button {
  /* Reset */
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  font-size: var(--text-base);
  font-weight: 600;
  line-height: 1.5;

  /* Layout */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: 10px 20px;
  min-height: 44px;
  min-width: 100px;

  /* Visual */
  border-radius: var(--radius-md);
  border: 2px solid transparent;
  background: var(--color-surface);
  color: var(--color-ink);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);

  /* Interaction */
  cursor: pointer;
  text-decoration: none;
  user-select: none;
  white-space: nowrap;

  /* Transitions */
  transition:
    background-color var(--transition-base),
    border-color var(--transition-base),
    color var(--transition-base),
    box-shadow var(--transition-base),
    transform var(--transition-fast);
}

/* Primary Button - Main actions */
.btn--primary,
.wizard-button--primary {
  background: var(--color-primary);
  border-color: var(--color-primary);
  color: #FFFFFF;
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.1),
    0 1px 2px rgba(14, 118, 253, 0.2);
}

.btn--primary:hover:not(:disabled),
.wizard-button--primary:hover:not(:disabled) {
  background: var(--color-primary-dark);
  border-color: var(--color-primary-dark);
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.12),
    0 2px 4px rgba(14, 118, 253, 0.3);
  transform: translateY(-1px);
}

.btn--primary:active:not(:disabled),
.wizard-button--primary:active:not(:disabled) {
  transform: translateY(0);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.1),
    0 1px 1px rgba(14, 118, 253, 0.2);
}

/* Secondary Button - Alternative actions */
.btn--secondary,
.wizard-button--secondary {
  background: var(--color-surface);
  border-color: var(--color-primary);
  color: var(--color-primary);
}

.btn--secondary:hover:not(:disabled),
.wizard-button--secondary:hover:not(:disabled) {
  background: var(--color-primary-light);
  border-color: var(--color-primary-dark);
  color: var(--color-primary-dark);
  box-shadow:
    0 2px 8px rgba(0, 0, 0, 0.08),
    0 1px 3px rgba(14, 118, 253, 0.15);
}

.btn--secondary:active:not(:disabled),
.wizard-button--secondary:active:not(:disabled) {
  transform: translateY(0);
  background: var(--color-primary-light);
}

/* Success Button - Positive actions */
.btn--success,
.wizard-button--success {
  background: var(--color-success);
  border-color: var(--color-success);
  color: #FFFFFF;
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.1),
    0 1px 2px rgba(16, 185, 129, 0.2);
}

.btn--success:hover:not(:disabled),
.wizard-button--success:hover:not(:disabled) {
  background: #059669;
  border-color: #059669;
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.12),
    0 2px 4px rgba(16, 185, 129, 0.3);
  transform: translateY(-1px);
}

/* Danger Button - Destructive actions */
.btn--danger,
.wizard-button--danger {
  background: var(--color-error);
  border-color: var(--color-error);
  color: #FFFFFF;
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.1),
    0 1px 2px rgba(239, 68, 68, 0.2);
}

.btn--danger:hover:not(:disabled),
.wizard-button--danger:hover:not(:disabled) {
  background: #DC2626;
  border-color: #DC2626;
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.12),
    0 2px 4px rgba(239, 68, 68, 0.3);
  transform: translateY(-1px);
}

/* Warning Button - Caution actions */
.btn--warning,
.wizard-button--warning {
  background: var(--color-warning);
  border-color: var(--color-warning);
  color: #FFFFFF;
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.1),
    0 1px 2px rgba(245, 158, 11, 0.2);
}

.btn--warning:hover:not(:disabled),
.wizard-button--warning:hover:not(:disabled) {
  background: #D97706;
  border-color: #D97706;
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.12),
    0 2px 4px rgba(245, 158, 11, 0.3);
  transform: translateY(-1px);
}

/* Ghost Button - Minimal styling */
.btn--ghost,
.wizard-button--ghost {
  background: transparent;
  border-color: transparent;
  color: var(--color-slate);
  box-shadow: none;
  min-width: auto;
}

.btn--ghost:hover:not(:disabled),
.wizard-button--ghost:hover:not(:disabled) {
  background: var(--color-smoke);
  color: var(--color-ink);
  box-shadow: none;
}

/* Text Button - Link-like appearance */
.btn--text,
.wizard-button--text {
  background: transparent;
  border-color: var(--color-border);
  color: var(--color-ink);
  box-shadow: none;
  min-width: auto;
  padding: 6px 12px;
  min-height: 36px;
}

.btn--text:hover:not(:disabled),
.wizard-button--text:hover:not(:disabled) {
  background: var(--color-smoke);
  border-color: var(--color-primary);
  color: var(--color-primary);
}

/* Outline Button - Border emphasis */
.btn--outline,
.wizard-button--outline {
  background: transparent;
  border-color: var(--color-border-strong);
  color: var(--color-ink);
}

.btn--outline:hover:not(:disabled),
.wizard-button--outline:hover:not(:disabled) {
  background: var(--color-surface);
  border-color: var(--color-ink);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

/* Button Sizes */
.btn--small,
.wizard-button--small {
  padding: 6px 14px;
  min-height: 36px;
  min-width: 80px;
  font-size: var(--text-sm);
}

.btn--large,
.wizard-button--large {
  padding: 14px 28px;
  min-height: 52px;
  min-width: 140px;
  font-size: var(--text-lg);
}

.btn--icon,
.wizard-button--icon {
  padding: 10px;
  min-width: 44px;
  aspect-ratio: 1;
}

/* Button States */
.btn:disabled,
.btn[disabled],
.wizard-button:disabled,
.wizard-button[disabled] {
  cursor: not-allowed;
  opacity: 0.5;
  background: var(--color-smoke) !important;
  border-color: var(--color-border) !important;
  color: var(--color-silver) !important;
  box-shadow: none !important;
  transform: none !important;
  pointer-events: none;
}

.btn:focus-visible,
.wizard-button:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color);
  outline-offset: var(--focus-ring-offset);
  box-shadow: 0 0 0 4px rgba(14, 118, 253, 0.15);
}

.btn--loading,
.wizard-button--loading {
  position: relative;
  color: transparent !important;
  pointer-events: none;
}

.btn--loading::after,
.wizard-button--loading::after {
  content: '';
  position: absolute;
  width: 16px;
  height: 16px;
  top: 50%;
  left: 50%;
  margin-left: -8px;
  margin-top: -8px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  border-top-color: #FFFFFF;
  animation: button-spin 0.6s linear infinite;
}

@keyframes button-spin {
  to { transform: rotate(360deg); }
}

/* Button Groups */
.button-group {
  display: flex;
  gap: var(--space-3);
  align-items: center;
  flex-wrap: wrap;
}

.button-group--attached {
  gap: 0;
}

.button-group--attached .btn,
.button-group--attached .wizard-button {
  border-radius: 0;
  margin-left: -2px;
}

.button-group--attached .btn:first-child,
.button-group--attached .wizard-button:first-child {
  border-top-left-radius: var(--radius-md);
  border-bottom-left-radius: var(--radius-md);
  margin-left: 0;
}

.button-group--attached .btn:last-child,
.button-group--attached .wizard-button:last-child {
  border-top-right-radius: var(--radius-md);
  border-bottom-right-radius: var(--radius-md);
}

.button-group--vertical {
  flex-direction: column;
  align-items: stretch;
}

.button-group--full-width {
  width: 100%;
}

.button-group--full-width .btn,
.button-group--full-width .wizard-button {
  flex: 1;
}

/* Responsive Button Behavior */
@media (max-width: 600px) {
  .btn,
  .wizard-button {
    min-width: auto;
    width: 100%;
  }

  .button-group {
    flex-direction: column;
    width: 100%;
  }

  .button-group .btn,
  .button-group .wizard-button {
    width: 100%;
  }
}

/* Dark Mode Adjustments */
html[data-theme='dark'] .btn,
html[data-theme='dark'] .wizard-button {
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

html[data-theme='dark'] .btn--ghost,
html[data-theme='dark'] .wizard-button--ghost {
  color: var(--color-slate);
}

html[data-theme='dark'] .btn--ghost:hover:not(:disabled),
html[data-theme='dark'] .wizard-button--ghost:hover:not(:disabled) {
  background: var(--color-smoke);
  color: var(--color-ink);
}

/* ========================================
   ENHANCED FORM INPUT TOUCH TARGETS
   ======================================== */

/* Base Input Enhancements */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="tel"],
input[type="url"],
input[type="search"],
input[type="date"],
input[type="time"],
input[type="datetime-local"],
textarea,
select {
  /* Enhanced Touch Targets */
  min-height: 48px;
  padding: 12px 16px;
  font-size: var(--text-base);
  line-height: 1.5;

  /* Visual Styling */
  border: 2px solid var(--color-border);
  border-radius: var(--radius-md);
  background: var(--color-surface);
  color: var(--color-ink);
  width: 100%;

  /* Smooth Interactions */
  transition:
    border-color var(--transition-base),
    background-color var(--transition-base),
    box-shadow var(--transition-base);

  /* Typography */
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  font-weight: 400;

  /* Remove default appearance */
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

/* Textarea Specific */
textarea {
  min-height: 120px;
  resize: vertical;
  padding: 14px 16px;
}

/* Select Specific */
select {
  cursor: pointer;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%234A5568' d='M4.427 6.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 6H4.604a.25.25 0 00-.177.427z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  padding-right: 40px;
}

/* Input States - Hover */
input[type="text"]:hover:not(:disabled):not(:focus),
input[type="email"]:hover:not(:disabled):not(:focus),
input[type="password"]:hover:not(:disabled):not(:focus),
input[type="number"]:hover:not(:disabled):not(:focus),
input[type="tel"]:hover:not(:disabled):not(:focus),
input[type="url"]:hover:not(:disabled):not(:focus),
input[type="search"]:hover:not(:disabled):not(:focus),
input[type="date"]:hover:not(:disabled):not(:focus),
input[type="time"]:hover:not(:disabled):not(:focus),
input[type="datetime-local"]:hover:not(:disabled):not(:focus),
textarea:hover:not(:disabled):not(:focus),
select:hover:not(:disabled):not(:focus) {
  border-color: var(--color-border-strong);
  background: var(--color-snow);
}

/* Input States - Focus */
input[type="text"]:focus,
input[type="email"]:focus,
input[type="password"]:focus,
input[type="number"]:focus,
input[type="tel"]:focus,
input[type="url"]:focus,
input[type="search"]:focus,
input[type="date"]:focus,
input[type="time"]:focus,
input[type="datetime-local"]:focus,
textarea:focus,
select:focus {
  border-color: var(--color-primary);
  background: var(--color-surface);
  outline: none;
  box-shadow:
    0 0 0 3px rgba(14, 118, 253, 0.1),
    0 1px 3px rgba(0, 0, 0, 0.05);
}

/* Input States - Disabled */
input:disabled,
textarea:disabled,
select:disabled {
  background: var(--color-smoke);
  border-color: var(--color-border);
  color: var(--color-silver);
  cursor: not-allowed;
  opacity: 0.6;
}

/* Input States - Read-only */
input:read-only,
textarea:read-only {
  background: var(--color-snow);
  border-color: var(--color-border);
  cursor: default;
}

/* Validation States - Valid */
input.is-valid,
textarea.is-valid,
select.is-valid,
input:valid:not(:placeholder-shown):not(:focus),
textarea:valid:not(:placeholder-shown):not(:focus) {
  border-color: var(--color-success);
  background-color: rgba(16, 185, 129, 0.02);
}

/* Validation States - Invalid */
input.is-invalid,
textarea.is-invalid,
select.is-invalid,
input:invalid:not(:placeholder-shown):not(:focus),
textarea:invalid:not(:placeholder-shown):not(:focus) {
  border-color: var(--color-error);
  background-color: rgba(239, 68, 68, 0.02);
}

/* Placeholder Styling */
input::placeholder,
textarea::placeholder {
  color: var(--color-silver);
  opacity: 0.7;
}

input:focus::placeholder,
textarea:focus::placeholder {
  opacity: 0.5;
}

/* Label Enhancements for Touch Targets */
label {
  display: block;
  font-weight: 600;
  font-size: var(--text-sm);
  color: var(--color-ink);
  margin-bottom: var(--space-2);
  cursor: pointer;
  user-select: none;
}

/* Checkbox and Radio Enhanced Touch Areas */
input[type="checkbox"] + label,
input[type="radio"] + label {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) 0;
  cursor: pointer;
  min-height: 44px;
}

/* Custom Checkbox Wrapper */
.checkbox-wrapper,
.radio-wrapper {
  display: inline-flex;
  align-items: center;
  gap: var(--space-3);
  min-height: 44px;
  padding: var(--space-2);
  cursor: pointer;
  user-select: none;
  border-radius: var(--radius-sm);
  transition: background-color var(--transition-base);
}

.checkbox-wrapper:hover,
.radio-wrapper:hover {
  background-color: var(--color-snow);
}

/* Input Group Enhancements */
.input-group {
  display: flex;
  gap: 0;
  width: 100%;
}

.input-group input {
  flex: 1;
}

.input-group-prepend,
.input-group-append {
  display: flex;
  align-items: center;
  padding: 0 var(--space-4);
  background: var(--color-smoke);
  border: 2px solid var(--color-border);
  color: var(--color-slate);
  font-size: var(--text-sm);
  font-weight: 600;
  white-space: nowrap;
}

.input-group-prepend {
  border-right: none;
  border-top-left-radius: var(--radius-md);
  border-bottom-left-radius: var(--radius-md);
}

.input-group-append {
  border-left: none;
  border-top-right-radius: var(--radius-md);
  border-bottom-right-radius: var(--radius-md);
}

.input-group input {
  border-radius: 0;
}

.input-group-prepend + input {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}

.input-group input + .input-group-append {
  border-top-right-radius: var(--radius-md);
  border-bottom-right-radius: var(--radius-md);
}

/* Number Input Enhancements */
input[type="number"] {
  -moz-appearance: textfield;
}

input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Search Input Enhancements */
input[type="search"]::-webkit-search-decoration,
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-results-button,
input[type="search"]::-webkit-search-results-decoration {
  -webkit-appearance: none;
}

/* File Input Enhancements */
input[type="file"] {
  padding: 10px;
  cursor: pointer;
}

input[type="file"]::file-selector-button {
  padding: 8px 16px;
  margin-right: var(--space-3);
  border: none;
  border-radius: var(--radius-sm);
  background: var(--color-primary);
  color: #FFFFFF;
  font-weight: 600;
  cursor: pointer;
  transition: background-color var(--transition-base);
}

input[type="file"]::file-selector-button:hover {
  background: var(--color-primary-dark);
}

/* Responsive Adjustments */
@media (max-width: 600px) {
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="tel"],
  input[type="url"],
  input[type="search"],
  input[type="date"],
  input[type="time"],
  input[type="datetime-local"],
  textarea,
  select {
    font-size: 16px; /* Prevents zoom on iOS */
    min-height: 52px; /* Larger touch targets on mobile */
  }

  textarea {
    min-height: 140px;
  }
}

/* Dark Mode Adjustments */
html[data-theme='dark'] input,
html[data-theme='dark'] textarea,
html[data-theme='dark'] select {
  background: var(--color-snow);
  border-color: var(--color-smoke);
  color: var(--color-ink);
}

html[data-theme='dark'] input:hover:not(:disabled):not(:focus),
html[data-theme='dark'] textarea:hover:not(:disabled):not(:focus),
html[data-theme='dark'] select:hover:not(:disabled):not(:focus) {
  background: var(--color-smoke);
  border-color: var(--color-silver);
}

html[data-theme='dark'] input:focus,
html[data-theme='dark'] textarea:focus,
html[data-theme='dark'] select:focus {
  background: var(--color-snow);
  border-color: var(--color-primary);
}

html[data-theme='dark'] select {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23CBD5E1' d='M4.427 6.427l3.396 3.396a.25.25 0 00.354 0l3.396-3.396A.25.25 0 0011.396 6H4.604a.25.25 0 00-.177.427z'/%3E%3C/svg%3E");
}

/* ========================================
   ENHANCED HOVER STATES & SUCCESS ANIMATIONS
   ======================================== */

/* Enhanced Card Hover Effects */
.form-card,
.wizard-option,
.export-option,
.template-card {
  transition:
    transform var(--transition-base),
    box-shadow var(--transition-base),
    border-color var(--transition-base);
}

.form-card:hover,
.wizard-option:hover,
.export-option:hover,
.template-card:hover {
  transform: translateY(-2px);
  box-shadow:
    0 8px 16px rgba(0, 0, 0, 0.08),
    0 3px 6px rgba(0, 0, 0, 0.04);
}

/* Navigation Item Hover Effects */
.wizard-nav-item {
  position: relative;
  transition:
    background-color var(--transition-base),
    color var(--transition-base),
    transform var(--transition-fast);
}

.wizard-nav-item::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%) scaleY(0);
  width: 3px;
  height: 70%;
  background: var(--color-primary);
  border-radius: 0 2px 2px 0;
  transition: transform var(--transition-base);
}

.wizard-nav-item:hover::before,
.wizard-nav-item[data-active="true"]::before {
  transform: translateY(-50%) scaleY(1);
}

.wizard-nav-item:hover:not([data-active="true"]) {
  background: var(--sidebar-hover);
  transform: translateX(2px);
}

/* Tab Hover Effects */
.wizard-tab,
.page-guide__tab {
  position: relative;
  transition:
    background-color var(--transition-base),
    color var(--transition-base);
}

.wizard-tab::after,
.page-guide__tab::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%) scaleX(0);
  width: 80%;
  height: 2px;
  background: var(--color-primary);
  transition: transform var(--transition-base);
}

.wizard-tab:hover::after,
.page-guide__tab:hover::after {
  transform: translateX(-50%) scaleX(0.5);
}

.wizard-tab.active::after,
.page-guide__tab.active::after {
  transform: translateX(-50%) scaleX(1);
}

/* Link Hover Effects */
a:not(.btn):not(.wizard-button):not(.wizard-nav-item) {
  position: relative;
  transition: color var(--transition-base);
}

a:not(.btn):not(.wizard-button):not(.wizard-nav-item):hover {
  color: var(--color-primary-dark);
}

/* Icon Hover Effects */
.wizard-info-trigger,
.page-guide__collapse,
.toast__close {
  transition:
    transform var(--transition-fast),
    background-color var(--transition-base),
    border-color var(--transition-base),
    color var(--transition-base);
}

.wizard-info-trigger:hover,
.page-guide__collapse:hover,
.toast__close:hover {
  transform: scale(1.1);
}

/* ========================================
   SUCCESS ANIMATIONS
   ======================================== */

/* Success Checkmark Animation */
@keyframes successCheckmark {
  0% {
    transform: scale(0) rotate(-45deg);
    opacity: 0;
  }
  50% {
    transform: scale(1.2) rotate(-45deg);
    opacity: 1;
  }
  100% {
    transform: scale(1) rotate(-45deg);
    opacity: 1;
  }
}

@keyframes successPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.9;
  }
}

@keyframes successFadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Success State Class */
.success-state {
  animation: successFadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.success-checkmark {
  animation: successCheckmark 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Success Banner */
.success-banner {
  background: linear-gradient(
    135deg,
    var(--color-success-light) 0%,
    rgba(16, 185, 129, 0.05) 100%
  );
  border: 2px solid var(--color-success);
  border-radius: var(--radius-lg);
  padding: var(--space-4);
  display: flex;
  align-items: center;
  gap: var(--space-3);
  animation: successFadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.success-banner__icon {
  flex-shrink: 0;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--color-success);
  color: #FFFFFF;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: successPulse 1s ease-in-out 3;
}

/* Progress Completion Animation */
@keyframes progressComplete {
  0% {
    width: 0%;
  }
  100% {
    width: 100%;
  }
}

.progress-complete {
  animation: progressComplete 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Step Complete Animation */
@keyframes stepComplete {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
  }
}

.step-complete {
  animation: stepComplete 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Ripple Effect */
@keyframes ripple {
  0% {
    transform: scale(0);
    opacity: 0.6;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
}

.ripple-effect {
  position: relative;
  overflow: hidden;
}

.ripple-effect::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  background: rgba(255, 255, 255, 0.5);
  border-radius: 50%;
  transform: scale(0);
  pointer-events: none;
}

.ripple-effect:active::after {
  animation: ripple 0.6s ease-out;
}

/* Shimmer Loading Effect */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

.shimmer {
  background: linear-gradient(
    90deg,
    var(--color-smoke) 25%,
    var(--color-snow) 50%,
    var(--color-smoke) 75%
  );
  background-size: 1000px 100%;
  animation: shimmer 2s infinite;
}

/* Smooth Slide In Animations */
@keyframes slideInFromLeft {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInFromRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInFromTop {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideInFromBottom {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.slide-in-left {
  animation: slideInFromLeft 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.slide-in-right {
  animation: slideInFromRight 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.slide-in-top {
  animation: slideInFromTop 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.slide-in-bottom {
  animation: slideInFromBottom 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Fade Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.fade-in {
  animation: fadeIn 0.3s ease-in;
}

.fade-out {
  animation: fadeOut 0.3s ease-out;
}

/* Scale Animations */
@keyframes scaleIn {
  from {
    transform: scale(0.9);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes scaleOut {
  from {
    transform: scale(1);
    opacity: 1;
  }
  to {
    transform: scale(0.9);
    opacity: 0;
  }
}

.scale-in {
  animation: scaleIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.scale-out {
  animation: scaleOut 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Bounce Animation */
@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.bounce {
  animation: bounce 0.6s ease-in-out 3;
}

/* Shake Animation (for errors) */
@keyframes shake {
  0%, 100% {
    transform: translateX(0);
  }
  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-10px);
  }
  20%, 40%, 60%, 80% {
    transform: translateX(10px);
  }
}

.shake {
  animation: shake 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  .success-state,
  .success-checkmark,
  .success-banner,
  .success-banner__icon,
  .progress-complete,
  .step-complete,
  .ripple-effect::after,
  .shimmer,
  .slide-in-left,
  .slide-in-right,
  .slide-in-top,
  .slide-in-bottom,
  .fade-in,
  .fade-out,
  .scale-in,
  .scale-out,
  .bounce,
  .shake {
    animation: none !important;
    transition: none !important;
  }
}
